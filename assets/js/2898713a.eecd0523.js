"use strict";(globalThis.webpackChunk_8x8_developer_docs=globalThis.webpackChunk_8x8_developer_docs||[]).push([[21070],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(96540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}},60445:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"connect/docs/whatsapp/whatsapp-flows-api","title":"WhatsApp Flows over 8x8 API","description":"This API reference provides complete technical documentation for developers implementing WhatsApp Flows programmatically.","source":"@site/docs/connect/docs/whatsapp/whatsapp-flows-api.md","sourceDirName":"connect/docs/whatsapp","slug":"/connect/docs/whatsapp/whatsapp-flows-api","permalink":"/connect/docs/whatsapp/whatsapp-flows-api","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"WhatsApp Flows over 8x8 API"},"sidebar":"sidebarConnectDocs","previous":{"title":"WhatsApp Flows in 8x8 Connect","permalink":"/connect/docs/whatsapp/whatsapp-flows-ui-guide"},"next":{"title":"Flow Examples","permalink":"/connect/docs/whatsapp/whatsapp-flows-examples"}}');var r=s(74848),l=s(28453);const t={sidebar_label:"WhatsApp Flows over 8x8 API"},o="WhatsApp Flows over 8x8 API",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Flow Management APIs",id:"flow-management-apis",level:2},{value:"API Endpoints Overview",id:"api-endpoints-overview",level:3},{value:"Create Flow",id:"create-flow",level:3},{value:"Update Flow",id:"update-flow",level:3},{value:"Get Flow",id:"get-flow",level:3},{value:"Delete Flow",id:"delete-flow",level:3},{value:"Publish Flow",id:"publish-flow",level:3},{value:"Deprecate Flow",id:"deprecate-flow",level:3},{value:"Preview Flow",id:"preview-flow",level:3},{value:"Sending Flow Messages",id:"sending-flow-messages",level:2},{value:"Via Template Message (Business-Initiated)",id:"via-template-message-business-initiated",level:3},{value:"Step 1: Create Template with Flow Button",id:"step-1-create-template-with-flow-button",level:4},{value:"Step 2: Send Template Message",id:"step-2-send-template-message",level:4},{value:"Via Interactive Message (User-Initiated)",id:"via-interactive-message-user-initiated",level:3},{value:"Webhook Integration",id:"webhook-integration",level:2},{value:"Webhook Configuration",id:"webhook-configuration",level:3},{value:"Flow Submission Payload",id:"flow-submission-payload",level:3},{value:"Parsing Submission Data",id:"parsing-submission-data",level:3},{value:"Webhook Response Requirements",id:"webhook-response-requirements",level:3},{value:"Response Handling Best Practices",id:"response-handling-best-practices",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"HTTP Error Codes",id:"http-error-codes",level:3},{value:"Common API Issues",id:"common-api-issues",level:3},{value:"Debugging API Errors",id:"debugging-api-errors",level:3},{value:"Rate Limits",id:"rate-limits",level:2},{value:"Testing",id:"testing",level:2},{value:"Testing Checklist",id:"testing-checklist",level:3},{value:"Testing Tools",id:"testing-tools",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Related Resources",id:"related-resources",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"whatsapp-flows-over-8x8-api",children:"WhatsApp Flows over 8x8 API"})}),"\n",(0,r.jsx)(n.p,{children:"This API reference provides complete technical documentation for developers implementing WhatsApp Flows programmatically."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The WhatsApp Flows API enables you to create, manage, publish, and send interactive forms within WhatsApp conversations. Use the API when you need:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automated deployments"})," from CI/CD pipelines"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Programmatic flow management"})," across multiple channels"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Version control"})," integration for Flow definitions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom tooling"})," and workflow automation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bulk operations"})," at scale"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"For non-developers:"})," If you prefer a visual, no-code interface, see the ",(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-flows-ui-guide",children:"WhatsApp Flows in 8x8 Connect"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before using the API, ensure you have:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Active WhatsApp Channel"})," in 8x8 Connect"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Channel ID"})," - Find in 8x8 Connect Portal under Channels"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Key"})," - Generate in 8x8 Connect Portal under API Keys"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subaccount ID"})," - Required for sending messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webhook endpoint"})," - Configured to receive Flow submissions"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(n.p,{children:"All API requests require Bearer token authentication using your API Key."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Header:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Authorization: Bearer YOUR_API_KEY\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows" \\\n  -H "Authorization: Bearer YOUR_API_KEY"\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"flow-management-apis",children:"Flow Management APIs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Base URL:"})," ",(0,r.jsx)(n.code,{children:"https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows"})]}),"\n",(0,r.jsx)(n.h3,{id:"api-endpoints-overview",children:"API Endpoints Overview"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Action"}),(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"Endpoint"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/get-whatsapp-flows",children:(0,r.jsx)(n.strong,{children:"List Flows"})})}),(0,r.jsx)(n.td,{children:"GET"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows"})}),(0,r.jsx)(n.td,{children:"Retrieves all Flows for a specified channel"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/create-whatsapp-flow",children:(0,r.jsx)(n.strong,{children:"Create Flow"})})}),(0,r.jsx)(n.td,{children:"POST"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows"})}),(0,r.jsxs)(n.td,{children:["Creates a new Flow in ",(0,r.jsx)(n.code,{children:"DRAFT"})," status"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/get-whatsapp-flow-details",children:(0,r.jsx)(n.strong,{children:"Get Flow"})})}),(0,r.jsx)(n.td,{children:"GET"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows/{flowId}"})}),(0,r.jsx)(n.td,{children:"Retrieves Flow details and configuration"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/update-whatsapp-flow",children:(0,r.jsx)(n.strong,{children:"Update Flow"})})}),(0,r.jsx)(n.td,{children:"PUT"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows/{flowId}"})}),(0,r.jsx)(n.td,{children:"Updates a Flow (DRAFT only)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/delete-whatsapp-flow",children:(0,r.jsx)(n.strong,{children:"Delete Flow"})})}),(0,r.jsx)(n.td,{children:"DELETE"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows/{flowId}"})}),(0,r.jsx)(n.td,{children:"Deletes a Flow (DRAFT only)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/publish-whatsapp-flow",children:(0,r.jsx)(n.strong,{children:"Publish Flow"})})}),(0,r.jsx)(n.td,{children:"POST"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows/{flowId}/publish"})}),(0,r.jsx)(n.td,{children:"Publishes Flow for use in messages"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/deprecate-whatsapp-flow",children:(0,r.jsx)(n.strong,{children:"Deprecate Flow"})})}),(0,r.jsx)(n.td,{children:"POST"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows/{flowId}/deprecate"})}),(0,r.jsx)(n.td,{children:"Marks Flow as deprecated"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/connect/reference/preview-whatsapp-flow",children:(0,r.jsx)(n.strong,{children:"Preview Flow"})})}),(0,r.jsx)(n.td,{children:"GET"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/flows/{flowId}/preview"})}),(0,r.jsx)(n.td,{children:"Generates preview URL for testing"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"create-flow",children:"Create Flow"}),"\n",(0,r.jsx)(n.p,{children:"Upload a new Flow definition to your WhatsApp channel."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST /config/v1/channels/whatsapp/{channelId}/flows"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Appointment Booking Flow",\n  "categories": ["APPOINTMENT_BOOKING"],\n  "flowJson": "{\\"version\\":\\"7.3\\",\\"screens\\":[{\\"id\\":\\"WELCOME\\",\\"title\\":\\"Book Appointment\\",\\"terminal\\":true,\\"success\\":true,\\"layout\\":{\\"type\\":\\"SingleColumnLayout\\",\\"children\\":[{\\"type\\":\\"TextHeading\\",\\"text\\":\\"Schedule Your Visit\\"},{\\"type\\":\\"DatePicker\\",\\"name\\":\\"appointment_date\\",\\"label\\":\\"Preferred Date\\",\\"required\\":true},{\\"type\\":\\"Footer\\",\\"label\\":\\"Confirm\\",\\"on-click-action\\":{\\"name\\":\\"complete\\",\\"payload\\":{\\"date\\":\\"${form.appointment_date}\\"}}}]}}]}"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"name"})})," (string, required): Human-readable Flow name for your reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"categories"})})," (array, required): Flow categories. Options:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["OTHER"]'})," - General purpose"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["LEAD_GENERATION"]'})," - Lead capture"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["CONTACT_US"]'})," - Contact forms"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["CUSTOMER_SUPPORT"]'})," - Support requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["SIGN_UP"]'})," - Registration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["APPOINTMENT_BOOKING"]'})," - Appointments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'["SURVEY"]'})," - Feedback collection"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"flowJson"})})," (string, required): ",(0,r.jsx)(n.strong,{children:"Stringified JSON"})," of your Flow definition"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important:"})," The ",(0,r.jsx)(n.code,{children:"flowJson"})," field must be a ",(0,r.jsx)(n.strong,{children:"JSON string"}),", not a JSON object. Use ",(0,r.jsx)(n.code,{children:"JSON.stringify()"})," to properly escape your Flow definition."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (201 Created):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1234567890123456",\n  "name": "Appointment Booking Flow",\n  "status": "DRAFT",\n  "categories": ["APPOINTMENT_BOOKING"],\n  "validation_errors": []\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Flow Status Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DRAFT"})," - Editable, not usable in messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PUBLISHED"})," - Live, immutable, usable in messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DEPRECATED"})," - Published but no longer recommended"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example with curl:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://chatapps.8x8.com/config/v1/channels/whatsapp/YOUR_CHANNEL_ID/flows" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Appointment Booking Flow",\n    "categories": ["APPOINTMENT_BOOKING"],\n    "flowJson": "{\\"version\\":\\"7.3\\",\\"screens\\":[...]}"\n  }\'\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"update-flow",children:"Update Flow"}),"\n",(0,r.jsxs)(n.p,{children:["Modify an existing Flow definition. ",(0,r.jsxs)(n.strong,{children:["Only works for Flows in ",(0,r.jsx)(n.code,{children:"DRAFT"})," status."]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"PUT /config/v1/channels/whatsapp/{channelId}/flows/{flowId}"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Request Body:"})," Same structure as Create Flow"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response (200 OK):"})," Same as Create Flow response"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),"\nPublished Flows cannot be updated. To modify a published Flow:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a new Flow with the updated definition"}),"\n",(0,r.jsx)(n.li,{children:"Publish the new Flow"}),"\n",(0,r.jsx)(n.li,{children:"Optionally deprecate the old Flow"}),"\n",(0,r.jsx)(n.li,{children:"Update templates to use the new Flow ID"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"get-flow",children:"Get Flow"}),"\n",(0,r.jsx)(n.p,{children:"Retrieve details and JSON definition of a specific Flow."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"GET /config/v1/channels/whatsapp/{channelId}/flows/{flowId}"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1234567890123456",\n  "name": "Appointment Booking Flow",\n  "status": "PUBLISHED",\n  "categories": ["APPOINTMENT_BOOKING"],\n  "validation_errors": [],\n  "flowJson": "{\\"version\\":\\"7.3\\",\\"screens\\":[...]}"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify Flow status before sending"}),"\n",(0,r.jsx)(n.li,{children:"Export Flow JSON for version control"}),"\n",(0,r.jsx)(n.li,{children:"Audit existing Flows"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"delete-flow",children:"Delete Flow"}),"\n",(0,r.jsxs)(n.p,{children:["Permanently delete a Flow. ",(0,r.jsxs)(n.strong,{children:["Only works for Flows in ",(0,r.jsx)(n.code,{children:"DRAFT"})," status."]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"DELETE /config/v1/channels/whatsapp/{channelId}/flows/{flowId}"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (204 No Content)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Important:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cannot delete published Flows"}),"\n",(0,r.jsx)(n.li,{children:"Cannot delete Flows currently in use by templates"}),"\n",(0,r.jsx)(n.li,{children:"Deletion is permanent and cannot be undone"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"publish-flow",children:"Publish Flow"}),"\n",(0,r.jsxs)(n.p,{children:["Publish a Flow to make it available for use in messages. ",(0,r.jsx)(n.strong,{children:"This action is irreversible."})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST /config/v1/channels/whatsapp/{channelId}/flows/{flowId}/publish"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1234567890123456",\n  "name": "Appointment Booking Flow",\n  "status": "PUBLISHED"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After Publishing:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Flow becomes ",(0,r.jsx)(n.strong,{children:"immutable"})," - no edits allowed"]}),"\n",(0,r.jsx)(n.li,{children:"Flow can be used in templates and interactive messages"}),"\n",(0,r.jsxs)(n.li,{children:["Flow status changes from ",(0,r.jsx)(n.code,{children:"DRAFT"})," to ",(0,r.jsx)(n.code,{children:"PUBLISHED"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"deprecate-flow",children:"Deprecate Flow"}),"\n",(0,r.jsx)(n.p,{children:"Mark a Flow as deprecated. It remains functional but is flagged as no longer recommended."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST /config/v1/channels/whatsapp/{channelId}/flows/{flowId}/deprecate"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1234567890123456",\n  "name": "Appointment Booking Flow",\n  "status": "DEPRECATED"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Phasing out old Flow versions"}),"\n",(0,r.jsx)(n.li,{children:"Migrating users to improved Flows"}),"\n",(0,r.jsx)(n.li,{children:"Maintaining backward compatibility while promoting new versions"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"preview-flow",children:"Preview Flow"}),"\n",(0,r.jsx)(n.p,{children:"Generate a preview URL to test the Flow before publishing."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"GET /config/v1/channels/whatsapp/{channelId}/flows/{flowId}/preview?refresh=false"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"refresh"})})," (boolean):\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"false"})," - Use cached preview (faster)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"true"})," - Generate new preview with latest changes"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response (200 OK):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "preview_url": "https://business.facebook.com/wa/manage/flows/1234567890123456/preview/",\n  "expires_at": "2026-02-05T18:00:00Z"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Preview URL:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Opens WhatsApp Business Manager"}),"\n",(0,r.jsx)(n.li,{children:"Shows interactive Flow preview"}),"\n",(0,r.jsx)(n.li,{children:"Expires after set period (usually 48 hours)"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"refresh=true"})," to generate new URL after expiry"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sending-flow-messages",children:"Sending Flow Messages"}),"\n",(0,r.jsx)(n.p,{children:"Flows can be sent via two methods:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Template messages"})," - Business-initiated (proactive outreach)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Interactive messages"})," - User-initiated (within 24-hour window)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"via-template-message-business-initiated",children:"Via Template Message (Business-Initiated)"}),"\n",(0,r.jsx)(n.p,{children:"Template messages with Flow buttons allow you to initiate conversations or re-open closed service windows."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Proactive appointment reminders"}),"\n",(0,r.jsx)(n.li,{children:"Feedback request campaigns"}),"\n",(0,r.jsx)(n.li,{children:"Re-engagement after window closes"}),"\n",(0,r.jsx)(n.li,{children:"Marketing with data collection"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"step-1-create-template-with-flow-button",children:"Step 1: Create Template with Flow Button"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Template Structure:"})}),"\n",(0,r.jsxs)(n.p,{children:["Templates must be created and approved by WhatsApp before use. See ",(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/template-message-api-library",children:"Template Message API Library"})," for complete documentation."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Flow Button in Template:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "language": "en_US",\n  "name": "appointment_reminder",\n  "category": "UTILITY",\n  "components": [\n    {\n      "type": "BODY",\n      "text": "Hi {{1}}, your appointment is coming up. Need to reschedule?"\n    },\n    {\n      "type": "BUTTONS",\n      "buttons": [\n        {\n          "type": "FLOW",\n          "text": "Reschedule",\n          "flowId": "1234567890123456"\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"step-2-send-template-message",children:"Step 2: Send Template Message"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST https://chatapps.8x8.com/api/v1/subaccounts/{subAccountId}/messages"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user": {\n    "msisdn": "+15551234567"\n  },\n  "type": "template",\n  "content": {\n    "template": {\n      "language": "en_US",\n      "name": "appointment_reminder",\n      "components": [\n        {\n          "type": "body",\n          "parameters": [\n            {\n              "type": "text",\n              "text": "John"\n            }\n          ]\n        },\n        {\n          "type": "button",\n          "subType": "flow",\n          "index": 0,\n          "parameters": [\n            {\n              "type": "action"\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Points:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"flowId"})," is configured in the template, not in the send request"]}),"\n",(0,r.jsxs)(n.li,{children:["Flow button uses ",(0,r.jsx)(n.code,{children:'subType: "flow"'})," in the button component"]}),"\n",(0,r.jsx)(n.li,{children:"User taps button to open the Flow"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"via-interactive-message-user-initiated",children:"Via Interactive Message (User-Initiated)"}),"\n",(0,r.jsxs)(n.p,{children:["Interactive Flow messages are used ",(0,r.jsx)(n.strong,{children:"within the 24-hour customer service window"})," after a user sends you a message."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Response to customer inquiry"}),"\n",(0,r.jsx)(n.li,{children:"Agent-initiated data collection during support chat"}),"\n",(0,r.jsx)(n.li,{children:"Follow-up after template interaction"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST https://chatapps.8x8.com/api/v1/subaccounts/{subAccountId}/messages"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interactive Flow Structure:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user": {\n    "msisdn": "+15551234567"\n  },\n  "type": "Interactive",\n  "content": {\n    "interactive": {\n      "type": "flow",\n      "header": {\n        "type": "text",\n        "text": "Schedule Your Appointment"\n      },\n      "body": {\n        "text": "Please select your preferred date and time for your visit."\n      },\n      "footer": {\n        "text": "Available Mon-Fri 9AM-5PM"\n      },\n      "action": {\n        "parameters": {\n          "flowId": "1234567890123456",\n          "flowCta": "Book Now"\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"flowId"})})," (required): The published Flow ID"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"flowCta"})})," (required): Button text (max 20 characters)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"flowToken"})})," (optional): Custom token passed to webhook"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"mode"})})," (optional): ",(0,r.jsx)(n.code,{children:'"draft"'})," for testing unpublished flows"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"flowMessageVersion"})})," (optional): ",(0,r.jsx)(n.code,{children:'"3"'})," for latest features"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"flowActionData"})})," (optional): Pre-populate Flow data"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"flowActionData": {\n  "screen": "SCREEN_ID",\n  "data": {\n    "field_name": "pre-filled value"\n  }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Service Window Requirement:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Can only send within 24 hours after user's last message"}),"\n",(0,r.jsx)(n.li,{children:"Outside window, use Template message instead"}),"\n",(0,r.jsxs)(n.li,{children:["See ",(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/concepts-fundamentals",children:"WhatsApp Conversation Windows"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Complete Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://chatapps.8x8.com/api/v1/subaccounts/YOUR_SUBACCOUNT_ID/messages" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "user": {\n      "msisdn": "+15551234567"\n    },\n    "type": "Interactive",\n    "content": {\n      "interactive": {\n        "type": "flow",\n        "body": {\n          "text": "Complete our quick survey to help us improve."\n        },\n        "action": {\n          "parameters": {\n            "flowId": "1234567890123456",\n            "flowCta": "Start Survey"\n          }\n        }\n      }\n    }\n  }\'\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"webhook-integration",children:"Webhook Integration"}),"\n",(0,r.jsx)(n.p,{children:"When users complete a Flow, submissions are delivered to your webhook as inbound messages."}),"\n",(0,r.jsx)(n.h3,{id:"webhook-configuration",children:"Webhook Configuration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Setup in 8x8 Connect Portal:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Messaging Apps"})," > ",(0,r.jsx)(n.strong,{children:"Webhooks"})]}),"\n",(0,r.jsx)(n.li,{children:"Add your endpoint URL (must be HTTPS)"}),"\n",(0,r.jsxs)(n.li,{children:["Select event type: ",(0,r.jsx)(n.code,{children:"inbound_message_received"})]}),"\n",(0,r.jsx)(n.li,{children:"Save configuration"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Complete webhook setup guide:"})," ",(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-webhooks",children:"WhatsApp Webhooks Documentation"})]}),"\n",(0,r.jsx)(n.h3,{id:"flow-submission-payload",children:"Flow Submission Payload"}),"\n",(0,r.jsxs)(n.p,{children:["Flow submissions arrive as ",(0,r.jsx)(n.code,{children:"inbound_message_received"})," events with type ",(0,r.jsx)(n.code,{children:"nfmReply"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Identifying Flow Submissions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'if (payload.type === "Interactive" &&\n    payload.content.interactive.type === "nfmReply") {\n  // This is a Flow submission\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Complete Payload Structure:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "inbound_message_received",\n  "payload": {\n    "umid": "unique-message-id-abc123",\n    "subAccountId": "your-subaccount-id",\n    "timestamp": "2026-02-03T10:30:00.000Z",\n    "user": {\n      "msisdn": "+15551234567",\n      "channelUserId": "15551234567"\n    },\n    "recipient": {\n      "channel": "whatsapp",\n      "channelId": "your-channel-id"\n    },\n    "type": "Interactive",\n    "content": {\n      "interactive": {\n        "type": "nfmReply",\n        "nfmReply": {\n          "responseJson": "{\\"appointment_date\\":\\"2026-03-15\\",\\"service_type\\":\\"plumbing\\",\\"flow_token\\":\\"<TOKEN>\\"}"\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parsing-submission-data",children:"Parsing Submission Data"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"responseJson"})," field contains a ",(0,r.jsx)(n.strong,{children:"JSON string"})," (not a parsed object). You must parse it to access form data."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 1: Extract the JSON String"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const responseJsonString = payload.content.interactive.nfmReply.responseJson;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 2: Parse to Object"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const submissionData = JSON.parse(responseJsonString);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 3: Validate and Process"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Validate required fields\nif (!submissionData.appointment_date || !submissionData.service_type) {\n  console.error('Missing required fields');\n  return res.status(200).send('OK'); // Always return 200 to acknowledge receipt\n}\n\n// Process the data\nawait createAppointment({\n  customerPhone: payload.user.msisdn,\n  appointmentDate: submissionData.appointment_date,\n  serviceType: submissionData.service_type,\n  flowToken: submissionData.flow_token,\n  umid: payload.umid // For idempotency tracking\n});\n\n// Send confirmation message\nawait sendMessage({\n  user: { msisdn: payload.user.msisdn },\n  type: 'text',\n  content: {\n    text: `Appointment confirmed for ${submissionData.appointment_date}. We'll send a reminder 24 hours before your visit.`\n  }\n});\n\n// Return 200 OK within 5 seconds\nres.status(200).send('OK');\n"})}),"\n",(0,r.jsx)(n.h3,{id:"webhook-response-requirements",children:"Webhook Response Requirements"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Your webhook endpoint must:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Respond with 200 OK"})," within 5 seconds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Process asynchronously"})," if operations take longer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle duplicates"})," using ",(0,r.jsx)(n.code,{children:"umid"})," for idempotency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate input"})," before processing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Log errors"})," without throwing exceptions"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Webhook Handler:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst app = express();\n\napp.post('/webhook', express.json(), async (req, res) => {\n  const { payload } = req.body;\n\n  // Acknowledge receipt immediately\n  res.status(200).send('OK');\n\n  // Process asynchronously\n  try {\n    if (payload.type === 'Interactive' &&\n        payload.content.interactive.type === 'nfmReply') {\n\n      // Parse Flow submission\n      const data = JSON.parse(payload.content.interactive.nfmReply.responseJson);\n\n      // Check for duplicate using umid\n      if (await isProcessed(payload.umid)) {\n        console.log('Duplicate submission, skipping');\n        return;\n      }\n\n      // Mark as processed\n      await markProcessed(payload.umid);\n\n      // Process submission\n      await handleFlowSubmission(data, payload);\n    }\n  } catch (error) {\n    console.error('Error processing webhook:', error);\n    // Log error but don't throw - webhook already acknowledged\n  }\n});\n\napp.listen(3000);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"response-handling-best-practices",children:"Response Handling Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate input:"})," Always validate submission data schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle errors gracefully:"})," Log parsing errors without crashing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Respond quickly:"})," Acknowledge within 5 seconds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Store metadata:"})," Save ",(0,r.jsx)(n.code,{children:"umid"}),", ",(0,r.jsx)(n.code,{children:"subAccountId"}),", ",(0,r.jsx)(n.code,{children:"flow_token"})," for traceability"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement idempotency:"})," Check ",(0,r.jsx)(n.code,{children:"umid"})," to prevent duplicate processing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Send confirmation:"})," Reply to user confirming successful submission"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor performance:"})," Track webhook response times and error rates"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.h3,{id:"http-error-codes",children:"HTTP Error Codes"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"Meaning"}),(0,r.jsx)(n.th,{children:"Common Causes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"400 Bad Request"})}),(0,r.jsx)(n.td,{children:"Invalid request format"}),(0,r.jsxs)(n.td,{children:["Malformed JSON, missing required fields, invalid ",(0,r.jsx)(n.code,{children:"flowJson"})," structure"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"401 Unauthorized"})}),(0,r.jsx)(n.td,{children:"Authentication failed"}),(0,r.jsx)(n.td,{children:"Invalid or expired API key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"404 Not Found"})}),(0,r.jsx)(n.td,{children:"Resource doesn't exist"}),(0,r.jsxs)(n.td,{children:["Invalid ",(0,r.jsx)(n.code,{children:"channelId"})," or ",(0,r.jsx)(n.code,{children:"flowId"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"409 Conflict"})}),(0,r.jsx)(n.td,{children:"Operation not allowed"}),(0,r.jsx)(n.td,{children:"Trying to update/delete published Flow"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"422 Unprocessable Entity"})}),(0,r.jsx)(n.td,{children:"Validation failed"}),(0,r.jsx)(n.td,{children:"Invalid Flow JSON schema, unsupported components"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"429 Too Many Requests"})}),(0,r.jsx)(n.td,{children:"Rate limit exceeded"}),(0,r.jsx)(n.td,{children:"Slow down request rate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"500 Internal Server Error"})}),(0,r.jsx)(n.td,{children:"Server error"}),(0,r.jsx)(n.td,{children:"Temporary issue, retry with exponential backoff"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"common-api-issues",children:"Common API Issues"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Message"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Flow not found"})}),(0,r.jsx)(n.td,{children:"Invalid or deleted Flow ID"}),(0,r.jsx)(n.td,{children:"Verify Flow exists with GET /flows/{flowId}"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Flow must be in DRAFT status"})}),(0,r.jsx)(n.td,{children:"Attempting to modify published Flow"}),(0,r.jsx)(n.td,{children:"Create new Flow version instead"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Invalid flowJson"})}),(0,r.jsx)(n.td,{children:"JSON structure doesn't match schema"}),(0,r.jsx)(n.td,{children:"Validate against WhatsApp Flows schema"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"flowJson must be a string"})}),(0,r.jsx)(n.td,{children:"Passed JSON object instead of string"}),(0,r.jsxs)(n.td,{children:["Use ",(0,r.jsx)(n.code,{children:"JSON.stringify()"})," to escape"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Flow is not published"})}),(0,r.jsx)(n.td,{children:"Trying to send unpublished Flow"}),(0,r.jsx)(n.td,{children:"Publish Flow first with POST /publish"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Outside service window"})}),(0,r.jsx)(n.td,{children:"Interactive message sent >24hrs"}),(0,r.jsx)(n.td,{children:"Use Template message instead"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"debugging-api-errors",children:"Debugging API Errors"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. Validate Flow JSON Structure"})}),"\n",(0,r.jsx)(n.p,{children:"Before uploading, validate your Flow definition:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// Validate structure\nconst flowDef = {\n  version: "7.3",\n  screens: [\n    {\n      id: "SCREEN1",\n      title: "Welcome",\n      terminal: true,\n      success: true,\n      layout: { /* ... */ }\n    }\n  ]\n};\n\n// Test parsing\ntry {\n  const flowJson = JSON.stringify(flowDef);\n  JSON.parse(flowJson); // Should succeed\n  console.log(\'Flow JSON is valid\');\n} catch (error) {\n  console.error(\'Invalid JSON:\', error);\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. Check Flow Status"})}),"\n",(0,r.jsx)(n.p,{children:"Verify Flow is in correct state:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows/{flowId}" \\\n  -H "Authorization: Bearer YOUR_API_KEY"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Expected status progression: ",(0,r.jsx)(n.code,{children:"DRAFT"})," \u2192 ",(0,r.jsx)(n.code,{children:"PUBLISHED"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. Test with Preview URL"})}),"\n",(0,r.jsx)(n.p,{children:"Use preview endpoint to test before publishing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows/{flowId}/preview?refresh=true" \\\n  -H "Authorization: Bearer YOUR_API_KEY"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4. Log Complete Request/Response"})}),"\n",(0,r.jsx)(n.p,{children:"When debugging, log full API interactions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const axios = require('axios');\n\ntry {\n  const response = await axios.post(\n    `https://chatapps.8x8.com/config/v1/channels/whatsapp/${channelId}/flows`,\n    {\n      name: 'Test Flow',\n      categories: ['OTHER'],\n      flowJson: flowJsonString\n    },\n    {\n      headers: {\n        'Authorization': `Bearer ${apiKey}`,\n        'Content-Type': 'application/json'\n      }\n    }\n  );\n\n  console.log('Success:', response.data);\n} catch (error) {\n  console.error('Error:', {\n    status: error.response?.status,\n    statusText: error.response?.statusText,\n    data: error.response?.data,\n    request: error.config\n  });\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"rate-limits",children:"Rate Limits"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Flow Configuration API:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"100 requests per minute"})," per API key"]}),"\n",(0,r.jsx)(n.li,{children:"Applies to all Flow management endpoints (create, update, delete, publish)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Messaging API:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"1000 messages per second"})," per WhatsApp Business Account"]}),"\n",(0,r.jsx)(n.li,{children:"Applies to both template and interactive messages"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement exponential backoff on 429 errors"}),"\n",(0,r.jsx)(n.li,{children:"Batch operations where possible"}),"\n",(0,r.jsx)(n.li,{children:"Cache Flow IDs to avoid repeated GET requests"}),"\n",(0,r.jsx)(n.li,{children:"Use webhooks instead of polling for submission status"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.h3,{id:"testing-checklist",children:"Testing Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Complete end-to-end API testing:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Create Flow:"})," POST /flows returns 201 with Flow ID"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Verify Status:"})," GET /flows/{flowId} shows ",(0,r.jsx)(n.code,{children:"DRAFT"})," status"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Generate Preview:"})," GET /preview returns valid URL"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Test Flow:"})," Open preview URL and complete Flow"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Publish Flow:"})," POST /publish changes status to ",(0,r.jsx)(n.code,{children:"PUBLISHED"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Send Message:"})," Interactive or Template message delivers successfully"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Webhook Received:"})," Webhook endpoint receives ",(0,r.jsx)(n.code,{children:"nfmReply"})," payload"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Parse Data:"})," All submitted fields parse correctly from ",(0,r.jsx)(n.code,{children:"responseJson"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Send Confirmation:"})," Confirmation message sent back to user"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"testing-tools",children:"Testing Tools"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Postman Collection:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Import 8x8 Connect API collection"}),"\n",(0,r.jsx)(n.li,{children:"Set environment variables (channelId, API key)"}),"\n",(0,r.jsx)(n.li,{children:"Test all Flow endpoints"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"cURL Examples:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Create Flow\ncurl -X POST "https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows" \\\n  -H "Authorization: Bearer $API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d @flow-definition.json\n\n# Publish Flow\ncurl -X POST "https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows/{flowId}/publish" \\\n  -H "Authorization: Bearer $API_KEY"\n\n# Send Interactive Message\ncurl -X POST "https://chatapps.8x8.com/api/v1/subaccounts/{subAccountId}/messages" \\\n  -H "Authorization: Bearer $API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d @interactive-message.json\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Webhook Testing:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use tools like ngrok to expose local endpoint"}),"\n",(0,r.jsx)(n.li,{children:"Use RequestBin to inspect webhook payloads"}),"\n",(0,r.jsxs)(n.li,{children:["Monitor webhook logs for ",(0,r.jsx)(n.code,{children:"nfmReply"})," events"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsxs)(n.p,{children:["Complete end-to-end examples are available in the ",(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-flows-examples",children:"WhatsApp Flows Examples"})," documentation, including:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Product Return & Exchange Flow"}),"\n",(0,r.jsx)(n.li,{children:"Loan Application with KYC"}),"\n",(0,r.jsx)(n.li,{children:"Service Appointment Booking"}),"\n",(0,r.jsx)(n.li,{children:"Healthcare Appointment Scheduling"}),"\n",(0,r.jsx)(n.li,{children:"CPaaS Lead Generation"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Each example includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Complete Flow JSON definition"}),"\n",(0,r.jsx)(n.li,{children:"API requests for creating and publishing"}),"\n",(0,r.jsx)(n.li,{children:"Template creation"}),"\n",(0,r.jsx)(n.li,{children:"Webhook handling code"}),"\n",(0,r.jsx)(n.li,{children:"Best practices"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"related-resources",children:"Related Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-flows-ui-guide",children:"WhatsApp Flows in 8x8 Connect"})})," - No-code Flow creation interface"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-flows-examples",children:"WhatsApp Flows Examples"})})," - Industry-specific Flow templates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-webhooks",children:"WhatsApp Webhooks"})})," - Webhook setup and event types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/template-message-api-library",children:"Template Message API"})})," - Complete template syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/interactive-message-api-library",children:"Interactive Message API"})})," - Interactive message reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developers.facebook.com/docs/whatsapp/flows",children:"WhatsApp Official Docs"})})," - Meta's Flow documentation"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);