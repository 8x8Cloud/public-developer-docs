"use strict";(self.webpackChunk_8x8_developer_docs=self.webpackChunk_8x8_developer_docs||[]).push([[95153],{521:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"actions-events/docs/getting-started-chapi","title":"Getting Started with 8x8 Chat","description":"Chapi is what we call our Chat API. It allows you to send and fetch messages from an 8x8 Work chat room.","source":"@site/docs/actions-events/docs/getting-started-chapi.md","sourceDirName":"actions-events/docs","slug":"/actions-events/docs/getting-started-chapi","permalink":"/production/actions-events/docs/getting-started-chapi","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebarActionsEventsDocs","previous":{"title":"Introduction","permalink":"/production/actions-events/docs/introduction"},"next":{"title":"API Key","permalink":"/production/actions-events/docs/chat-api-key"}}');var s=n(74848),r=n(28453);const o={},i="Getting Started with 8x8 Chat",c={},d=[{value:"Getting Prepared for Beta Access",id:"getting-prepared-for-beta-access",level:2},{value:"1. Get Messages from a Room",id:"1-get-messages-from-a-room",level:2},{value:"2. Sending a Message to a Room",id:"2-sending-a-message-to-a-room",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"getting-started-with-8x8-chat",children:"Getting Started with 8x8 Chat"})}),"\n",(0,s.jsx)(t.p,{children:"Chapi is what we call our Chat API. It allows you to send and fetch messages from an 8x8 Work chat room."}),"\n",(0,s.jsx)(t.h2,{id:"getting-prepared-for-beta-access",children:"Getting Prepared for Beta Access"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["\ud83d\udea7 ",(0,s.jsx)(t.strong,{children:"Get your API Key (beta) \u2014 Skip this if you've already got one!"})]}),"\n",(0,s.jsxs)(t.p,{children:["There's one prerequisite before you're able to use these APIs, and that's getting your API Key. You can generate your API key in the Admin Console. ",(0,s.jsx)(t.a,{href:"/actions-events/docs/chat-api-key",children:"Here's how"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"1-get-messages-from-a-room",children:"1. Get Messages from a Room"}),"\n",(0,s.jsxs)(t.p,{children:["First up, let's get the messages for a room If we're using a ",(0,s.jsx)(t.code,{children:"test_key"})," we'll default our room to the room named ",(0,s.jsx)(t.code,{children:"CHAPI sandbox"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"curl --request GET \\\n  --url 'https://api.8x8.com/chat/api/chat/v1/messages?pageSize=10' \\\n  --header 'x-api-key: test_key_kjdfidj238jf9123df221'\n\n"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["\ud83d\udcd8 ",(0,s.jsx)(t.strong,{children:"Did you get an error?"})]}),"\n",(0,s.jsxs)(t.p,{children:["If you see ",(0,s.jsx)(t.code,{children:'{"fault":{"faultstring":"Invalid access token","detail":{"errorcode":"oauth.v2.InvalidAccessToken"}}}'})," You'll want to make sure you replace the api key (",(0,s.jsx)(t.code,{children:"test_key_kjdfidj238jf9123df221"}),") with your own."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Awesome! You should have received a JSON payload with something like the following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'[\n    {\n        "authorUser": {\n            "avatarUrl": "https://s.gravatar.com/avatar/c0fc68541276afaf1ecf7e7f761f518e?s=80",\n            "email": "user@example.com",\n            "id": "007",\n            "name": "Matt Gardner"\n        },\n        "parsed": "Hello World!",\n        "id": "uv4y2dmXRy_v868BZQJadWAPWv7Am-oRO1p86k00dZY",\n        "timestamp": 1594169304503487\n    },\n    {\n        "authorUser": {\n            "avatarUrl": "https://s.gravatar.com/avatar/c0fc68541276afaf1ecf7e7f761f518e?s=80",\n            "email": "user@example.com",\n            "id": "007",\n            "name": "Matt Gardner"\n        },\n        "parsed": "i r developer!",\n        "id": "AFsG2zb5ckapn-RJalcNWHxZGy70IDhv6dzbkvA5t2g",\n        "timestamp": 1594169027435340\n    }\n]\n\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Two messages already exist in this room \u2014 you may not have any. That's ok, let's send a message!"})}),"\n",(0,s.jsx)(t.h2,{id:"2-sending-a-message-to-a-room",children:"2. Sending a Message to a Room"}),"\n",(0,s.jsx)(t.p,{children:"Let's send a message to a room. Copy/paste the below into your terminal"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'curl -H "Accept: application/json" \\\n  -H \'content-type: application/json\' \\\n  -H "x-api-key: test_key_kjdfidj238jf9123df221" \\\n  --request POST \\\n  --data \'{"messageRaw":"Hello from Terminal!"}\' \\\n  https://api.8x8.com/chat/api/chat/v1/messages\n\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"P.S."})," Want to see this message come through in realtime? Log into 8x8 Work and find the room called ",(0,s.jsx)(t.code,{children:"CHAPI Sandbox"}),".** ",(0,s.jsx)(t.em,{children:"If it doesn't exist, it will once you've successfully sent your first message!"})]}),"\n",(0,s.jsx)(t.p,{children:"Now that we've sent a message, you should also see it when logged into 8x8 Work. Plus, if we re-run the first snippet, we'll see that our message was added to the array it returns, like so:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'[\n    {\n        "authorUser": {\n            "avatarUrl": "https://s.gravatar.com/avatar/c0fc68541276afaf1ecf7e7f761f518e?s=80",\n            "email": "user@example.com",\n            "id": "007",\n            "name": "Matt Gardner"\n        },\n        "parsed": "Hello World!",\n        "id": "uv4y2dmXRy_v868BZQJadWAPWv7Am-oRO1p86k00dZY",\n        "timestamp": 1594169304503487\n    },\n    {\n        "authorUser": {\n            "avatarUrl": "https://s.gravatar.com/avatar/c0fc68541276afaf1ecf7e7f761f518e?s=80",\n            "email": "user@example.com",\n            "id": "007",\n            "name": "Matt Gardner"\n        },\n        "parsed": "i r developer!",\n        "id": "AFsG2zb5ckapn-RJalcNWHxZGy70IDhv6dzbkvA5t2g",\n        "timestamp": 1594169027435340\n    },\n    {\n        "authorUser": {\n            "avatarUrl": "https://s.gravatar.com/avatar/c0fc68541276afaf1ecf7e7f761f518e?s=80",\n            "email": "user@example.com",\n            "id": "007",\n            "name": "Matt Gardner"\n        },\n        "parsed": "Hello from Terminal!",\n        "id": "AFsG2zb5ckapn-RJalcNWHxZGy70IDhv6dzbkvA5t24",\n        "timestamp": 1594169027435321\n    }\n]\n\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:(0,s.jsx)(t.strong,{children:"Note: your API key is limited to 5 requests per second."})})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>i});var a=n(96540);const s={},r=a.createContext(s);function o(e){const t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);