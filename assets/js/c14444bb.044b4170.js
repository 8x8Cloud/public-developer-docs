"use strict";(globalThis.webpackChunk_8x8_developer_docs=globalThis.webpackChunk_8x8_developer_docs||[]).push([[39499],{13836:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"connect/docs/whatsapp/whatsapp-webhooks","title":"WhatsApp Webhooks Reference","description":"Webhooks enable real-time, event-driven communication between the 8x8 platform and your application. When specific events occur (such as receiving a message, delivery confirmation, or template status change), 8x8 sends an HTTP POST request to your configured webhook URL with event details in JSON format.","source":"@site/docs/connect/docs/whatsapp/whatsapp-webhooks.md","sourceDirName":"connect/docs/whatsapp","slug":"/connect/docs/whatsapp/whatsapp-webhooks","permalink":"/connect/docs/whatsapp/whatsapp-webhooks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Webhooks Reference"},"sidebar":"sidebarConnectDocs","previous":{"title":"Interactive Message API Library","permalink":"/connect/docs/whatsapp/interactive-message-api-library"},"next":{"title":"Media Hosting & Management","permalink":"/connect/docs/whatsapp/whatsapp-media-hosting"}}');var r=s(74848),l=s(28453);const t={sidebar_label:"Webhooks Reference"},d="WhatsApp Webhooks Reference",a={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Inbound Messages",id:"inbound-messages",level:2},{value:"Inbound Message Types",id:"inbound-message-types",level:3},{value:"Text Message",id:"text-message",level:4},{value:"Media Message (Image, Video, Audio, Document)",id:"media-message-image-video-audio-document",level:4},{value:"Interactive Message (Button Reply)",id:"interactive-message-button-reply",level:4},{value:"Common Fields (All Message Types)",id:"common-fields-all-message-types",level:3},{value:"Outbound Delivery Receipts",id:"outbound-delivery-receipts",level:2},{value:"Template Status Updates",id:"template-status-updates",level:2},{value:"Template Quality Updates",id:"template-quality-updates",level:2},{value:"Phone Number Quality &amp; Messaging Limit Updates",id:"phone-number-quality--messaging-limit-updates",level:2},{value:"Webhook Security Best Practices",id:"webhook-security-best-practices",level:2},{value:"Verify Webhook Origin",id:"verify-webhook-origin",level:3},{value:"Handle Retries Gracefully",id:"handle-retries-gracefully",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Testing Webhooks",id:"testing-webhooks",level:2},{value:"Local Development",id:"local-development",level:3},{value:"Webhook Logs",id:"webhook-logs",level:3},{value:"Related Resources",id:"related-resources",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"whatsapp-webhooks-reference",children:"WhatsApp Webhooks Reference"})}),"\n",(0,r.jsx)(n.p,{children:"Webhooks enable real-time, event-driven communication between the 8x8 platform and your application. When specific events occur (such as receiving a message, delivery confirmation, or template status change), 8x8 sends an HTTP POST request to your configured webhook URL with event details in JSON format."}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["You can configure your webhook URLs in the 8x8 Connect portal under ",(0,r.jsx)(n.a,{href:"https://connect.8x8.com/webhooks",children:(0,r.jsx)(n.strong,{children:"Webhooks"})}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"8x8 Connect Webhook Configuration",src:s(25497).A+"",width:"3248",height:"2112"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Requirements:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Your webhook endpoint must be publicly accessible via HTTPS"}),"\n",(0,r.jsx)(n.li,{children:"Your server should respond with HTTP 200 within 5 seconds"}),"\n",(0,r.jsx)(n.li,{children:"Failed webhook deliveries will be retried with exponential backoff"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"inbound-messages",children:"Inbound Messages"}),"\n",(0,r.jsx)(n.p,{children:"Fires when a user sends a message to your WhatsApp number. This is the primary webhook for enabling two-way chat and building conversational applications."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event Type:"})," ",(0,r.jsx)(n.code,{children:"inbound_message_received"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Respond to customer inquiries automatically"}),"\n",(0,r.jsx)(n.li,{children:"Trigger workflows based on user input"}),"\n",(0,r.jsx)(n.li,{children:"Route messages to appropriate agents or systems"}),"\n",(0,r.jsx)(n.li,{children:"Process button/list selections from interactive messages"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"inbound-message-types",children:"Inbound Message Types"}),"\n",(0,r.jsx)(n.p,{children:"The inbound message webhook structure varies based on the message type. Below are examples for the most common types."}),"\n",(0,r.jsx)(n.h4,{id:"text-message",children:"Text Message"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "inbound_message_received",\n  "description": "ChatApps inbound message",\n  "payload": {\n    "umid": "<UNIQUE_MESSAGE_ID>",\n    "subAccountId": "<SUBACCOUNT_ID>",\n    "timestamp": "2025-12-02T07:05:51Z",\n    "user": {\n      "msisdn": "+15551234567",\n      "channelUserId": "15551234567",\n      "name": "<USER_NAME>"\n    },\n    "recipient": {\n      "channel": "whatsapp",\n      "channelId": "<CHANNEL_ID>"\n    },\n    "type": "Text",\n    "content": {\n      "text": "Hello"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),": ",(0,r.jsx)(n.code,{children:'"Text"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content.text"}),": The text message content sent by the user"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"media-message-image-video-audio-document",children:"Media Message (Image, Video, Audio, Document)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Image):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "inbound_message_received",\n  "description": "ChatApps inbound message",\n  "payload": {\n    "umid": "<UNIQUE_MESSAGE_ID>",\n    "subAccountId": "<SUBACCOUNT_ID>",\n    "timestamp": "2025-12-02T07:07:19Z",\n    "user": {\n      "msisdn": "+15551234567",\n      "channelUserId": "15551234567",\n      "name": "<USER_NAME>"\n    },\n    "recipient": {\n      "channel": "whatsapp",\n      "channelId": "<CHANNEL_ID>"\n    },\n    "type": "Image",\n    "content": {\n      "url": "<MEDIA_FILE_URL>"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),": Message type - ",(0,r.jsx)(n.code,{children:'"Image"'}),", ",(0,r.jsx)(n.code,{children:'"Video"'}),", ",(0,r.jsx)(n.code,{children:'"Audio"'}),", ",(0,r.jsx)(n.code,{children:'"Document"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content.url"}),": Pre-signed URL to download the media file (expires after 24 hours)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Media Type Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Image"}),": Customer sent a photo"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Video"}),": Customer sent a video"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Audio"}),": Customer sent a voice message or audio file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Document"}),": Customer sent a document (PDF, Word, Excel, etc.)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"interactive-message-button-reply",children:"Interactive Message (Button Reply)"}),"\n",(0,r.jsx)(n.p,{children:"When a user responds to an interactive button or list, the payload includes the interactive response details."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "inbound_message_received",\n  "description": "ChatApps inbound message",\n  "payload": {\n    "umid": "<UNIQUE_MESSAGE_ID>",\n    "subAccountId": "<SUBACCOUNT_ID>",\n    "timestamp": "2025-12-02T06:58:50Z",\n    "user": {\n      "msisdn": "+15551234567",\n      "channelUserId": "15551234567",\n      "name": "<USER_NAME>"\n    },\n    "recipient": {\n      "channel": "whatsapp",\n      "channelId": "<CHANNEL_ID>"\n    },\n    "type": "Interactive",\n    "content": {\n      "interactive": {\n        "type": "button_reply",\n        "button_reply": {\n          "id": "option-2",\n          "title": "FAQ"\n        }\n      }\n    },\n    "replyToUmid": "<ORIGINAL_MESSAGE_UMID>"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),": ",(0,r.jsx)(n.code,{children:'"Interactive"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content.interactive.type"}),": ",(0,r.jsx)(n.code,{children:'"button_reply"'})," or ",(0,r.jsx)(n.code,{children:'"list_reply"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content.interactive.button_reply.id"}),": The button ID you defined"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content.interactive.button_reply.title"}),": The button text the user saw"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replyToUmid"}),": The UMID of your original interactive message"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interactive Response Types:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"button_reply"}),": User tapped a quick-reply button"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"list_reply"}),": User selected an item from an interactive list"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"common-fields-all-message-types",children:"Common Fields (All Message Types)"}),"\n",(0,r.jsx)(n.p,{children:"These fields appear in every inbound message webhook:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"umid"}),": Unique message identifier for this inbound message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subAccountId"}),": Your subaccount identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"timestamp"}),": ISO 8601 timestamp when message was received"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user.msisdn"}),": Customer's phone number (E.164 format)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user.channelUserId"}),": Customer's WhatsApp ID (phone without +)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user.name"}),": Customer's WhatsApp display name (if available)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recipient.channel"}),": Always ",(0,r.jsx)(n.code,{children:'"whatsapp"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recipient.channelId"}),": Your WhatsApp channel (phone number) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),": Message type determines content structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replyToUmid"}),": Present if customer replied to a specific message"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"outbound-delivery-receipts",children:"Outbound Delivery Receipts"}),"\n",(0,r.jsx)(n.p,{children:"Fires when the status of an outbound message changes. Status updates include sent, delivered, read, and failure states. Read receipt checks continue for up to 10 days after message delivery."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event Type:"})," ",(0,r.jsx)(n.code,{children:"outbound_message_status_changed"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Track message delivery success rates"}),"\n",(0,r.jsx)(n.li,{children:"Retry failed messages"}),"\n",(0,r.jsx)(n.li,{children:"Measure customer engagement (read receipts)"}),"\n",(0,r.jsx)(n.li,{children:"Update CRM systems with delivery status"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible Status States:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sent"}),": Message successfully sent to WhatsApp"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"delivered"}),": Message delivered to recipient's device"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"read"}),": Recipient opened and read the message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"undelivered"}),": Message failed to deliver"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Delivered):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "outbound_message_status_changed",\n  "description": "ChatApps outbound message delivery receipt",\n  "payload": {\n    "umid": "<UNIQUE_MESSAGE_ID>",\n    "subAccountId": "<SUBACCOUNT_ID>",\n    "channel": "whatsapp",\n    "user": {\n      "msisdn": "+6512345678",\n      "channelUserId": "6512345678"\n    },\n    "status": {\n      "state": "delivered",\n      "detail": "delivered_to_recipient",\n      "timestamp": "2025-05-05T09:15:57.00Z"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Read):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "outbound_message_status_changed",\n  "description": "ChatApps outbound message delivery receipt",\n  "payload": {\n    "umid": "<UNIQUE_MESSAGE_ID>",\n    "subAccountId": "<SUBACCOUNT_ID>",\n    "channel": "whatsApp",\n    "user": {\n      "msisdn": "+6512345678",\n      "channelUserId": "6512345678"\n    },\n    "status": {\n      "state": "read",\n      "timestamp": "2025-05-17T06:27:52.45Z"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Undelivered):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "outbound_message_status_changed",\n  "description": "ChatApps outbound message delivery receipt",\n  "payload": {\n    "umid": "<UNIQUE_MESSAGE_ID>",\n    "subAccountId": "<SUBACCOUNT_ID>",\n    "channel": "whatsapp",\n    "user": {\n      "msisdn": "+6512345678",\n      "channelUserId": "+6512345678"\n    },\n    "status": {\n      "state": "undelivered",\n      "detail": "rejected_by_operator",\n      "timestamp": "2016-01-01T00:00:00Z",\n      "errorCode": 15,\n      "errorMessage": "Invalid destination"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"umid"}),": Unique message identifier matching your original send request"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status.state"}),": Current delivery state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status.detail"}),": Additional context about the status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"errorCode"})," & ",(0,r.jsx)(n.code,{children:"errorMessage"}),": Present only for failed messages"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"template-status-updates",children:"Template Status Updates"}),"\n",(0,r.jsx)(n.p,{children:"Fires when your template's approval status changes. Meta reviews all templates before they can be used, and this webhook notifies you of approval, rejection, pausing, or disabling."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event Type:"})," ",(0,r.jsx)(n.code,{children:"template_status_update"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Monitor template approval workflow"}),"\n",(0,r.jsx)(n.li,{children:"Alert team when templates are rejected"}),"\n",(0,r.jsx)(n.li,{children:"Track when templates are paused due to quality issues"}),"\n",(0,r.jsx)(n.li,{children:"Automate template resubmission after fixing issues"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible Status Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"APPROVED"}),": Template approved and ready to send"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"REJECTED"}),": Template failed review (check ",(0,r.jsx)(n.code,{children:"reason"})," field)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PENDING"}),": Under Meta review (up to 24 hours)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PAUSED"}),": Temporarily disabled due to quality score"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DISABLED"}),": Permanently disabled after multiple pauses"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Status Update - Rejected):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "eventId": "0f88f5c4-fae7-4dcf-8ff2-b2990133edea",\n  "timestamp": "2025-01-01T00:00:00.00Z",\n  "provider": "WhatsApp",\n  "businessAccountId": "<BusinessAccountId>",\n  "accountId": "<AccountId>",\n  "eventType": "template_status_update",\n  "eventDetails": {\n    "templateId": "<TEMPLATE_ID>",\n    "templateName": "<TEMPLATE_NAME>",\n    "templateLanguage": "<TEMPLATE_LANGUAGE>",\n    "meta": {\n      "status": "REJECTED",\n      "reason": "INCORRECT_CATEGORY"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common Rejection Reasons:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"INCORRECT_CATEGORY"}),": Template submitted in wrong category (e.g., promotional content in UTILITY)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"INVALID_FORMAT"}),": Parameter formatting issues or missing samples"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ABUSIVE_CONTENT"}),": Violates Meta's content policies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SCAM"}),": Appears to be fraudulent or misleading"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"templateName"})," & ",(0,r.jsx)(n.code,{children:"templateLanguage"}),": Identifies which template changed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.status"}),": New status value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.reason"}),": Rejection reason (present only when status is ",(0,r.jsx)(n.code,{children:"REJECTED"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"template-quality-updates",children:"Template Quality Updates"}),"\n",(0,r.jsx)(n.p,{children:"Fires when Meta updates the quality score for your template based on user feedback (blocks, reports). Quality scores affect whether templates get paused or disabled."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event Type:"})," ",(0,r.jsx)(n.code,{children:"template_quality_update"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Monitor template performance in real-time"}),"\n",(0,r.jsx)(n.li,{children:"Alert teams when quality degrades"}),"\n",(0,r.jsx)(n.li,{children:"Pause campaigns using low-quality templates"}),"\n",(0,r.jsx)(n.li,{children:"Correlate quality changes with campaign timing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Quality Score Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GREEN"})," (High): Good user feedback, no issues"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"YELLOW"})," (Medium): Some negative feedback, monitor closely"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RED"})," (Low): Poor feedback, template may be auto-paused"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UNKNOWN"}),": New template with insufficient data"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Quality Update):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "eventId": "0f88f5c4-fae7-4dcf-8ff2-b2990133edea",\n  "timestamp": "2025-01-01T00:00:00.00Z",\n  "provider": "WhatsApp",\n  "businessAccountId": "<BusinessAccountId>",\n  "accountId": "<AccountId>",\n  "eventType": "template_quality_update",\n  "eventDetails": {\n    "templateId": "<TEMPLATE_ID>",\n    "templateName": "<TEMPLATE_NAME>",\n    "templateLanguage": "<TEMPLATE_LANGUAGE>",\n    "meta": {\n      "previousQualityScore": "UNKNOWN",\n      "newQualityScore": "GREEN"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.previousQualityScore"}),": Previous quality rating"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.newQualityScore"}),": Updated quality rating"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Quality-Based Pausing:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1st RED score: Paused for 3 hours"}),"\n",(0,r.jsx)(n.li,{children:"2nd RED score: Paused for 6 hours"}),"\n",(0,r.jsx)(n.li,{children:"3rd RED score: Permanently disabled"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"phone-number-quality--messaging-limit-updates",children:"Phone Number Quality & Messaging Limit Updates"}),"\n",(0,r.jsx)(n.p,{children:"Fires when your phone number's quality rating changes or when Meta adjusts your account's messaging tier limits based on sending patterns and quality."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event Type:"})," ",(0,r.jsx)(n.code,{children:"phone_number_quality_update"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Monitor account health and reputation"}),"\n",(0,r.jsx)(n.li,{children:"Track messaging limit increases as you scale"}),"\n",(0,r.jsx)(n.li,{children:"Alert on limit downgrades due to quality issues"}),"\n",(0,r.jsx)(n.li,{children:"Plan capacity based on current tier"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Messaging Tier Limits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TIER_250"}),": 250 unique users per 24 hours (new accounts)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TIER_1K"}),": 1,000 unique users per 24 hours"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TIER_10K"}),": 10,000 unique users per 24 hours"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TIER_100K"}),": 100,000 unique users per 24 hours"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UNLIMITED"}),": No daily limit"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Messaging Limit Upgrade):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "eventId": "0f88f5c4-fae7-4dcf-8ff2-b2990133edea",\n  "timestamp": "2025-01-01T00:00:00.00Z",\n  "provider": "WhatsApp",\n  "businessAccountId": "<BusinessAccountId>",\n  "accountId": "<AccountId>",\n  "eventType": "phone_number_quality_update",\n  "eventDetails": {\n    "displayPhoneNumber": "15550783881",\n    "meta": {\n      "event": "UPGRADE",\n      "currentLimit": "TIER_10K",\n      "oldLimit": "TIER_1K"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sample JSON Payload (Quality Downgrade):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "eventId": "0f88f5c4-fae7-4dcf-8ff2-b2990133edea",\n  "timestamp": "2025-01-01T00:00:00.00Z",\n  "provider": "WhatsApp",\n  "businessAccountId": "<BusinessAccountId>",\n  "accountId": "<AccountId>",\n  "eventType": "phone_number_quality_update",\n  "eventDetails": {\n    "displayPhoneNumber": "15550783881",\n    "meta": {\n      "event": "FLAGGED",\n      "reason": "QUALITY_DECREASE"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"displayPhoneNumber"}),": Which phone number is affected"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.event"}),": Type of change (",(0,r.jsx)(n.code,{children:"UPGRADE"}),", ",(0,r.jsx)(n.code,{children:"DOWNGRADE"}),", ",(0,r.jsx)(n.code,{children:"FLAGGED"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.currentLimit"})," & ",(0,r.jsx)(n.code,{children:"meta.oldLimit"}),": Tier change for limit updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"meta.reason"}),": Reason for quality flags"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Event Types:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UPGRADE"}),": Messaging limit increased (good sending history)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DOWNGRADE"}),": Messaging limit decreased (quality issues)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FLAGGED"}),": Phone number quality issue detected"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"webhook-security-best-practices",children:"Webhook Security Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"verify-webhook-origin",children:"Verify Webhook Origin"}),"\n",(0,r.jsx)(n.p,{children:"Always verify that webhook requests come from 8x8:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IP Whitelisting"}),": Configure your firewall to accept webhooks only from 8x8's IP ranges"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Signature Verification"}),": Check the ",(0,r.jsx)(n.code,{children:"X-8x8-Signature"})," header (if provided)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTTPS Only"}),": Never accept webhooks over unencrypted HTTP"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"handle-retries-gracefully",children:"Handle Retries Gracefully"}),"\n",(0,r.jsx)(n.p,{children:"8x8 retries failed webhooks with exponential backoff:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Make your webhook endpoint idempotent (safe to call multiple times)"}),"\n",(0,r.jsxs)(n.li,{children:["Use the ",(0,r.jsx)(n.code,{children:"umid"})," or ",(0,r.jsx)(n.code,{children:"eventId"})," to deduplicate events"]}),"\n",(0,r.jsx)(n.li,{children:"Return HTTP 200 quickly, then process asynchronously"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Example webhook handler (Node.js/Express)\napp.post('/webhooks/whatsapp', async (req, res) => {\n  // Return 200 immediately\n  res.status(200).send('OK');\n\n  // Process asynchronously\n  try {\n    const event = req.body;\n    await processWebhook(event);\n  } catch (error) {\n    console.error('Webhook processing failed:', error);\n    // Log for manual review, don't fail the request\n  }\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing-webhooks",children:"Testing Webhooks"}),"\n",(0,r.jsx)(n.h3,{id:"local-development",children:"Local Development"}),"\n",(0,r.jsx)(n.p,{children:"Use tools like ngrok to expose your local server for webhook testing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ngrok http 3000\n# Use the generated HTTPS URL in webhook configuration\n"})}),"\n",(0,r.jsx)(n.h3,{id:"webhook-logs",children:"Webhook Logs"}),"\n",(0,r.jsx)(n.p,{children:"The 8x8 Connect portal provides webhook delivery logs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"View recent webhook attempts"}),"\n",(0,r.jsx)(n.li,{children:"See response codes and timing"}),"\n",(0,r.jsx)(n.li,{children:"Retry failed deliveries manually"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-resources",children:"Related Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/whatsapp-over-8x8-api",children:"WhatsApp over 8x8 API"})," - Main API guide"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/operations-monitoring",children:"Operations, Monitoring & Troubleshooting"})," - Error handling and debugging"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/connect/docs/whatsapp/governance-security",children:"Governance, Security & Compliance"})," - Security best practices"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},25497:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/8x8 Connect - Webhook Configuration-837f8d0d4bc520dce3234269abd849b2.webp"},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(96540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);