"use strict";(self.webpackChunk_8x8_developer_docs=self.webpackChunk_8x8_developer_docs||[]).push([[72352],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>d});var o=n(96540);const s={},i=o.createContext(s);function r(e){const t=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:t},e.children)}},30892:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/a6beedd-image-a259124b1c8a0bf43dcf40fed672d74d.png"},42843:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/fdb2a07-image-7b5a2bfca422de517223a355c126d6d4.png"},43085:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/b1fcb73-image-31213e1574c359c51b4f6c81234191c0.png"},45916:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/03bccf8-image-fb7e2297d64ec1d9c540ce53787e1b8e.png"},51851:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/3fd8cd6-image-dd14df0bb373d55620d48a355c97ed48.png"},69043:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/d1aab65-image-32c204a36068f49be79cbf0b7040cf19.png"},88756:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/23bf390-image-073128cf8007c860936391d2eb907632.png"},96208:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/83371bc-image-34dc8d1f5c6542507000742a7a26ef7f.png"},97842:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"connect/docs/tutorial-opt-out-keyword-messaging-apps-whatsapp-for-third-party-system","title":"Tutorial: Opt Out Keyword (SMS) for Third-Party System","description":"Overview","source":"@site/docs/connect/docs/tutorial-opt-out-keyword-messaging-apps-whatsapp-for-third-party-system.md","sourceDirName":"connect/docs","slug":"/connect/docs/tutorial-opt-out-keyword-messaging-apps-whatsapp-for-third-party-system","permalink":"/production/connect/docs/tutorial-opt-out-keyword-messaging-apps-whatsapp-for-third-party-system","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebarConnectDocs","previous":{"title":"Tutorial: Opt Out Keyword (SMS) for Third-Party System","permalink":"/production/connect/docs/tutorial-opt-out-keyword-sms-for-third-party-system"},"next":{"title":"Tutorial: Building a SMS + ChatApps Reservation Menu","permalink":"/production/connect/docs/tutorial-automation-builder-sms-chatapps-reservation-menu"}}');var s=n(74848),i=n(28453);const r={},d="Tutorial: Opt Out Keyword (SMS) for Third-Party System",a={},l=[{value:"Overview",id:"overview",level:2},{value:"Pre-Built Template",id:"pre-built-template",level:2},{value:"Opt-Out Template",id:"opt-out-template",level:2},{value:"Building the Workflow",id:"building-the-workflow",level:2},{value:"Deciding the Keyword",id:"deciding-the-keyword",level:2},{value:"Add Contact to Opt Out Group",id:"add-contact-to-opt-out-group",level:2},{value:"Opt Out Message",id:"opt-out-message",level:2},{value:"Testing",id:"testing",level:2},{value:"Removing from Opt out list",id:"removing-from-opt-out-list",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",br:"br",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"tutorial-opt-out-keyword-sms-for-third-party-system",children:"Tutorial: Opt Out Keyword (SMS) for Third-Party System"})}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(t.p,{children:["This tutorial will show you how to use Automation Builder to build an ",(0,s.jsx)(t.strong,{children:"opt-out flow"})," for SMS."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"This workflow in automation builder will perform these steps:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Listen for a keyword sent via SMS to a specific number attached to your subaccount"}),"\n",(0,s.jsx)(t.li,{children:"Send a HTTP request to your server with information regarding the customer\u2019s phone number and the keyword they specified so that your server can perform opt-out logic"}),"\n",(0,s.jsx)(t.li,{children:"Send a follow up SMS to let the customer know they have opted out."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"8x8 has already pre-built an Automation Builder template which allows you to add a keyword which will allow customers to opt out of further communications. We will use this template as the basis of the tutorial."}),"\n",(0,s.jsx)(t.h2,{id:"pre-built-template",children:"Pre-Built Template"}),"\n",(0,s.jsxs)(t.p,{children:["First go to the Automation Builder page (",(0,s.jsx)(t.a,{href:"https://connect.8x8.com/automation",children:"https://connect.8x8.com/automation"}),') and select the blue button for "Create Custom Workflow"']}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(69043).A+"",width:"1818",height:"420"})}),"\n",(0,s.jsx)(t.h2,{id:"opt-out-template",children:"Opt-Out Template"}),"\n",(0,s.jsx)(t.p,{children:'From the pop up in the next page, select the "Opt-Out" template to use as our base.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(30892).A+"",width:"1245",height:"573"})}),"\n",(0,s.jsx)(t.h2,{id:"building-the-workflow",children:"Building the Workflow"}),"\n",(0,s.jsx)(t.p,{children:'In the next page the workflow should be pre-populated with steps, click on the "Trigger" step which is the first step in the flow. Select the subaccount which has the shortcode number that you wish to associate with this opt-out flow. Once it is selected click "Update" to save it to the step.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(45916).A+"",width:"1240",height:"880"})}),"\n",(0,s.jsx)(t.h2,{id:"deciding-the-keyword",children:"Deciding the Keyword"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"keyword"}),' is controlled by the "Branch" Step in red, in this example it is set to ',(0,s.jsx)(t.strong,{children:"STOP"})," but you can modify this if you wish to change the condition to trigger the opt out."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{alt:"Opt Out Flow Part 1 of 2",src:n(96208).A+"",width:"980",height:"1671"}),"Opt Out Flow Part 1 of 2"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{alt:"Opt Out Flow Part 2 of 2",src:n(43085).A+"",width:"961",height:"1261"}),"Opt Out Flow Part 2 of 2"]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["\ud83d\udcd8 ",(0,s.jsx)(t.strong,{children:"The branch step has a limit of 5 choices in the Automation Builder UI. You can create additional workflows with additional choices if you need them at the top level of your menu. Another option is to look into the Automation Builder API to build this workflow instead which can support more than 5 choices."})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"add-contact-to-opt-out-group",children:"Add Contact to Opt Out Group"}),"\n",(0,s.jsx)(t.p,{children:"Once that is done, you can move on to modifying the HTTP Request itself. In the examples the URL and the headers should be substituted for the URL and headers (if required) of your server endpoint instead."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(88756).A+"",width:"726",height:"1726"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Field"}),(0,s.jsx)(t.th,{children:"Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Step Name"}),(0,s.jsx)(t.td,{children:"Any Value"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"URL"}),(0,s.jsx)(t.td,{children:"POST to your URL endpoint to handle the request."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Header - Content Type"}),(0,s.jsx)(t.td,{children:"application/json"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["Header - Authorisation",(0,s.jsx)(t.br,{}),"Note: Your API key can be obtained from the API Keys section of the Connect Dashboard."]}),(0,s.jsx)(t.td,{children:"Bearer"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsxs)(t.td,{children:["Request Body (Example, this will include the phone number that sent the SMS message to your 8x8 number from {{data.payload.source}}. The text that the user inputted will be in {{data.payload.content.text}}.",(0,s.jsx)(t.br,{}),"The example will send a JSON response body to your API endpoint that will be similar to.",(0,s.jsx)(t.br,{}),"{",(0,s.jsx)(t.br,{}),'"msisdn": "+6512345678",',(0,s.jsx)(t.br,{}),'"subaccount": "SAMPLE_SUBACCOUNT"',(0,s.jsx)(t.br,{}),"}"]}),(0,s.jsxs)(t.td,{children:["{",(0,s.jsx)(t.br,{}),'"msisdn": "{{data.payload.source}}",',(0,s.jsx)(t.br,{}),'"subaccount": "{{data.payload.content.text}}"',(0,s.jsx)(t.br,{}),"}"]})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"opt-out-message",children:"Opt Out Message"}),"\n",(0,s.jsx)(t.p,{children:"You can replace the message with a custom message to your users. Make sure to again select the correct subaccount for your short code that you want to send the SMS from."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(42843).A+"",width:"349",height:"490"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Field"}),(0,s.jsx)(t.th,{children:"Example Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Step Name"}),(0,s.jsx)(t.td,{children:"Any Value"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Please select a new subaccount"}),(0,s.jsx)(t.td,{children:"Your 8x8 Subaccount"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Sender ID"}),(0,s.jsx)(t.td,{children:"Your 8x8 Sender ID"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Destination"}),(0,s.jsx)(t.td,{children:"{{data.payload.source}}"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Message"}),(0,s.jsx)(t.td,{children:"We're sorry to see you go, but confirm you have been unsubscribed and will no longer receive SMS from us."})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"After saving these changes, the opt out flow can be enabled by enabling the button at the top left and saving. It will activate immediately and any message that contains the keyword will result in a user being added to the opt-out group."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(51851).A+"",width:"856",height:"541"})}),"\n",(0,s.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(t.p,{children:"Once the automation workflow is in place, you can test it by sending the opt-out keyword via SMS to the phone number attached to your subaccount."}),"\n",(0,s.jsx)(t.p,{children:"Note you will need to build a URL endpoint to accept the HTTP request that will come from the Automation Builder workflow which is outside the scope of this guide."}),"\n",(0,s.jsx)(t.h2,{id:"removing-from-opt-out-list",children:"Removing from Opt out list"}),"\n",(0,s.jsx)(t.p,{children:"You can reverse this logic to implement something like a resubscribe or an opt-in so that customers can resubscribed if needed."})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);