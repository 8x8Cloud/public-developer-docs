"use strict";(globalThis.webpackChunk_8x8_developer_docs=globalThis.webpackChunk_8x8_developer_docs||[]).push([[35225],{4865:(e,n,s)=>{s.d(n,{A:()=>x});var r=s(96540),t=s(34164),i=s(17559),l=s(23104),a=s(47751),o=s(92303);const c={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var d=s(74848);function h({className:e,block:n,selectedValue:s,selectValue:r,tabValues:i}){const a=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),h=e=>{const n=e.currentTarget,t=a.indexOf(n),l=i[t].value;l!==s&&(o(n),r(l))},u=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const s=a.indexOf(e.currentTarget)+1;n=a[s]??a[0];break}case"ArrowLeft":{const s=a.indexOf(e.currentTarget)-1;n=a[s]??a[a.length-1];break}}n?.focus()};return(0,d.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:r})=>(0,d.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{a.push(e)},onKeyDown:u,onClick:h,...r,className:(0,t.A)("tabs__item",c.tabItem,r?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function u({lazy:e,children:n,selectedValue:s}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===s);return e?(0,r.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,d.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function p(e){const n=(0,a.u)(e);return(0,d.jsxs)("div",{className:(0,t.A)(i.G.tabs.container,"tabs-container",c.tabList),children:[(0,d.jsx)(h,{...n,...e}),(0,d.jsx)(u,{...n,...e})]})}function x(e){const n=(0,o.default)();return(0,d.jsx)(p,{...e,children:(0,a.v)(e.children)},String(n))}},19365:(e,n,s)=>{s.r(n),s.d(n,{default:()=>l});s(96540);var r=s(34164);const t={tabItem:"tabItem_Ymn6"};var i=s(74848);function l({children:e,hidden:n,className:s}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(t.tabItem,s),hidden:n,children:e})}},25937:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"actions-events/docs/streaming/examples/nodejs","title":"Node.js Client Example","description":"This page provides a complete Node.js implementation for connecting to the 8x8 Event Streaming service.","source":"@site/docs/actions-events/docs/streaming/examples/nodejs.mdx","sourceDirName":"actions-events/docs/streaming/examples","slug":"/actions-events/docs/streaming/examples/nodejs","permalink":"/actions-events/docs/streaming/examples/nodejs","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"sidebarActionsEventsDocs","previous":{"title":"Python Client Example","permalink":"/actions-events/docs/streaming/examples/python"},"next":{"title":"Browser Client Example","permalink":"/actions-events/docs/streaming/examples/browser"}}');var t=s(74848),i=s(28453),l=s(4865),a=s(19365);const o={sidebar_position:5},c="Node.js Client Example",d={},h=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Install Node.js",id:"install-nodejs",level:3},{value:"Install Dependencies",id:"install-dependencies",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Running the Client",id:"running-the-client",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Command-Line Options",id:"command-line-options",level:3},{value:"Output and Piping",id:"output-and-piping",level:2},{value:"Pretty-print with jq",id:"pretty-print-with-jq",level:3},{value:"Filter events",id:"filter-events",level:3},{value:"Save to file",id:"save-to-file",level:3},{value:"Search with grep",id:"search-with-grep",level:3},{value:"Key Features",id:"key-features",level:2},{value:"Modern JavaScript",id:"modern-javascript",level:3},{value:"Payload Decoding",id:"payload-decoding",level:3},{value:"Message Acknowledgement",id:"message-acknowledgement",level:3},{value:"Control Message Filtering",id:"control-message-filtering",level:3},{value:"Clean Output",id:"clean-output",level:3},{value:"Graceful Shutdown",id:"graceful-shutdown",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Making the Script Executable",id:"making-the-script-executable",level:2},{value:"Using npm Scripts",id:"using-npm-scripts",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Module not found: &#39;ws&#39;",id:"module-not-found-ws",level:3},{value:"SSL Certificate Errors",id:"ssl-certificate-errors",level:3},{value:"Connection Refused",id:"connection-refused",level:3},{value:"Node.js Version Too Old",id:"nodejs-version-too-old",level:3},{value:"Syntax Errors",id:"syntax-errors",level:3},{value:"Comparison with Other Clients",id:"comparison-with-other-clients",level:2},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"nodejs-client-example",children:"Node.js Client Example"})}),"\n",(0,t.jsx)(n.p,{children:"This page provides a complete Node.js implementation for connecting to the 8x8 Event Streaming service."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The Node.js client example demonstrates:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["WebSocket connection using the ",(0,t.jsx)(n.code,{children:"ws"})," library"]}),"\n",(0,t.jsx)(n.li,{children:"Authentication using X-API-Key"}),"\n",(0,t.jsx)(n.li,{children:"Message reading and payload decoding"}),"\n",(0,t.jsx)(n.li,{children:"Modern async/await syntax"}),"\n",(0,t.jsx)(n.li,{children:"Command-line argument parsing"}),"\n",(0,t.jsxs)(n.li,{children:["Clean, pipe-friendly output for integration with tools like ",(0,t.jsx)(n.code,{children:"jq"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Node.js 14 or higher"})," (includes required async/await and modern JavaScript support)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"npm"})," package manager"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ws library"})," (version 8.16.0 or higher)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.h3,{id:"install-nodejs",children:"Install Node.js"}),"\n",(0,t.jsx)(n.p,{children:"If you don't have Node.js 14+:"}),"\n","\n",(0,t.jsxs)(l.A,{children:[(0,t.jsxs)(a.default,{value:"macos",label:"macOS",children:[(0,t.jsx)(n.p,{children:"Using Homebrew:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install node\n"})}),(0,t.jsx)(n.p,{children:"Or using nvm (recommended):"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install nvm\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash\n\n# Install latest LTS\nnvm install --lts\nnvm use --lts\n"})})]}),(0,t.jsxs)(a.default,{value:"ubuntu",label:"Ubuntu/Debian",children:[(0,t.jsx)(n.p,{children:"Using NodeSource repository (recommended):"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Node.js 20.x LTS\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt-get install -y nodejs\n"})})]}),(0,t.jsx)(a.default,{value:"redhat",label:"RedHat/CentOS/Fedora",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Node.js 20.x LTS\ncurl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -\nsudo dnf install -y nodejs\n"})})}),(0,t.jsxs)(a.default,{value:"windows",label:"Windows",children:[(0,t.jsxs)(n.p,{children:["Download from ",(0,t.jsx)(n.a,{href:"https://nodejs.org/",children:"nodejs.org"})," or use chocolatey:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"choco install nodejs\n"})}),(0,t.jsx)(n.p,{children:"Or use nvm-windows:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nvm install lts\nnvm use lts\n"})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"install-dependencies",children:"Install Dependencies"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"package.json"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "pulsar-simple-client",\n  "version": "1.0.0",\n  "description": "Simplified WebSocket client for Apache Pulsar",\n  "main": "pulsar-simple-client.js",\n  "bin": {\n    "pulsar-simple-client": "./pulsar-simple-client.js"\n  },\n  "dependencies": {\n    "ws": "^8.18.0"\n  },\n  "engines": {\n    "node": ">=14.0.0"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Then install dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"#!/usr/bin/env node\n/**\n * Pulsar Simple Client - A simplified WebSocket client for Apache Pulsar\n */\n\nconst WebSocket = require('ws');\nconst { URL } = require('url');\n\n/**\n * Pulsar Simple Client class\n */\nclass PulsarSimpleClient {\n  constructor(options) {\n    this.host = options.host;\n    this.port = options.port;\n    this.tenant = options.tenant;\n    this.namespace = options.namespace;\n    this.topic = options.topic;\n    this.xApiKey = options.xApiKey;\n  }\n\n  /**\n   * Build the Pulsar WebSocket URL\n   */\n  buildUrl() {\n    const baseUrl = `wss://${this.host}:${this.port}/ws/v2/reader/persistent/${this.tenant}/${this.namespace}/${this.topic}`;\n    const url = new URL(baseUrl);\n\n    // Add X-API-Key as query parameter if provided\n    if (this.xApiKey) {\n      url.searchParams.set('x-api-key', this.xApiKey);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Get HTTP headers for authentication\n   */\n  getHeaders() {\n    const headers = {};\n\n    // Add X-API-Key header if provided\n    if (this.xApiKey) {\n      headers['X-API-Key'] = this.xApiKey;\n    }\n\n    return headers;\n  }\n\n  /**\n   * Check if message is a control message (should not be acknowledged)\n   */\n  isControlMessage(msg) {\n    return (msg.type && msg.type !== '') || (msg.endOfTopic && msg.endOfTopic !== '');\n  }\n\n  /**\n   * Parse Pulsar message and extract decoded payload\n   */\n  extractPulsarPayload(data) {\n    try {\n      const msg = JSON.parse(data);\n      const payloadB64 = msg.payload || '';\n\n      // Decode base64 payload\n      const payloadBuffer = Buffer.from(payloadB64, 'base64');\n      const payload = payloadBuffer.toString('utf-8');\n\n      return { msg, payload };\n    } catch (err) {\n      console.error(`Error extracting payload: ${err.message}`, { stream: process.stderr });\n      return null;\n    }\n  }\n\n  /**\n   * Send an acknowledgment message for a received message\n   * This is REQUIRED for WebSocket readers to prevent backlog buildup and message delivery stoppage\n   */\n  sendAck(ws, messageId) {\n    try {\n      const ackMsg = { messageId };\n      ws.send(JSON.stringify(ackMsg));\n    } catch (err) {\n      console.error(`Warning: Failed to send ack: ${err.message}`);\n    }\n  }\n\n  /**\n   * Connect to WebSocket and receive messages\n   */\n  async connectAndReceive() {\n    const wsUrl = this.buildUrl();\n    const headers = this.getHeaders();\n\n    console.error(`Connecting to ${wsUrl}...`);\n\n    // Configure WebSocket options\n    const wsOptions = {\n      headers: headers,\n    };\n\n    const ws = new WebSocket(wsUrl, wsOptions);\n\n    // Handle connection open\n    ws.on('open', () => {\n      console.error('Successfully connected');\n    });\n\n    // Handle incoming messages\n    ws.on('message', (data) => {\n      const result = this.extractPulsarPayload(data.toString());\n      if (result) {\n        const { msg, payload } = result;\n\n        // Check if this is a control message (don't print or ack these)\n        if (this.isControlMessage(msg)) {\n          return;\n        }\n\n        // Print only the payload (suitable for piping)\n        console.log(payload);\n\n        // Send acknowledgment (required for WebSocket flow control)\n        this.sendAck(ws, msg.messageId);\n      }\n    });\n\n    // Handle errors\n    ws.on('error', (err) => {\n      console.error(`WebSocket error: ${err.message}`);\n      process.exit(1);\n    });\n\n    // Handle connection close\n    ws.on('close', (code, reason) => {\n      console.error(`Connection closed: ${code} ${reason}`);\n      process.exit(0);\n    });\n\n    // Handle process termination\n    process.on('SIGINT', () => {\n      console.error('Interrupted by user');\n      ws.close();\n      process.exit(0);\n    });\n\n    process.on('SIGTERM', () => {\n      console.error('Terminated');\n      ws.close();\n      process.exit(0);\n    });\n  }\n}\n\n/**\n * Parse command-line arguments\n */\nfunction parseArgs() {\n  const args = process.argv.slice(2);\n  // Example uses euw2 region. For other regions, see developer.8x8.com\n  const options = {\n    host: 'pulsar-ws-euw2.8x8.com',\n    port: 443,\n    namespace: 'event-v1',\n    topic: 'all',\n  };\n\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    const nextArg = args[i + 1];\n\n    switch (arg) {\n      case '--host':\n        options.host = nextArg;\n        i++;\n        break;\n      case '--port':\n        options.port = parseInt(nextArg, 10);\n        i++;\n        break;\n      case '--tenant':\n        options.tenant = nextArg;\n        i++;\n        break;\n      case '--namespace':\n        options.namespace = nextArg;\n        i++;\n        break;\n      case '--topic':\n        options.topic = nextArg;\n        i++;\n        break;\n      case '--x-api-key':\n        options.xApiKey = nextArg;\n        i++;\n        break;\n    }\n  }\n\n  // Validate required parameters\n  if (!options.tenant) {\n    console.error('Error: --tenant is required');\n    process.exit(1);\n  }\n\n  return options;\n}\n\n/**\n * Main entry point\n */\nasync function main() {\n  try {\n    const options = parseArgs();\n    const client = new PulsarSimpleClient(options);\n    await client.connectAndReceive();\n  } catch (err) {\n    console.error(`Error: ${err.message}`);\n    process.exit(1);\n  }\n}\n\n// Run main function\nif (require.main === module) {\n  main();\n}\n\nmodule.exports = { PulsarSimpleClient };\n"})}),"\n",(0,t.jsx)(n.h2,{id:"running-the-client",children:"Running the Client"}),"\n",(0,t.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node pulsar-simple-client.js \\\n  --tenant YOUR_TENANT \\\n  --x-api-key YOUR_API_KEY\n"})}),"\n",(0,t.jsx)(n.h3,{id:"command-line-options",children:"Command-Line Options"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--tenant"})}),(0,t.jsx)(n.td,{children:"Your 8x8 tenant name"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--host"})}),(0,t.jsx)(n.td,{children:"Pulsar broker hostname"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"pulsar-ws-euw2.8x8.com"})," (EUW2)"]}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--port"})}),(0,t.jsx)(n.td,{children:"Pulsar broker port"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"443"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--namespace"})}),(0,t.jsx)(n.td,{children:"Pulsar namespace"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"event-v1"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--topic"})}),(0,t.jsx)(n.td,{children:"Topic name"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"all"})}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--x-api-key"})}),(0,t.jsx)(n.td,{children:"API key for authentication"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--insecure"})}),(0,t.jsx)(n.td,{children:"Skip TLS certificate verification"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"true"})}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"output-and-piping",children:"Output and Piping"}),"\n",(0,t.jsx)(n.p,{children:"The client outputs only the decoded message payload to stdout, with status messages going to stderr. This makes it perfect for piping:"}),"\n",(0,t.jsx)(n.h3,{id:"pretty-print-with-jq",children:"Pretty-print with jq"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node pulsar-simple-client.js --tenant YOUR_TENANT --x-api-key YOUR_KEY | jq .\n"})}),"\n",(0,t.jsx)(n.h3,{id:"filter-events",children:"Filter events"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node pulsar-simple-client.js --tenant YOUR_TENANT --x-api-key YOUR_KEY | \\\n  jq 'select(.eventType == \"agent.login\")'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"save-to-file",children:"Save to file"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node pulsar-simple-client.js --tenant YOUR_TENANT --x-api-key YOUR_KEY > events.log\n"})}),"\n",(0,t.jsx)(n.h3,{id:"search-with-grep",children:"Search with grep"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'node pulsar-simple-client.js --tenant YOUR_TENANT --x-api-key YOUR_KEY | grep "error"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,t.jsx)(n.h3,{id:"modern-javascript",children:"Modern JavaScript"}),"\n",(0,t.jsx)(n.p,{children:"The Node.js client uses modern JavaScript features:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Async/await\nasync function connectAndReceive(url, apiKey) {\n    // ...\n}\n\n// Arrow functions\nws.on('message', (data) => {\n    // ...\n});\n\n// Template literals\nconst url = `wss://${host}:${port}/ws/v2/reader/persistent/${tenant}/${namespace}/${topic}`;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"payload-decoding",children:"Payload Decoding"}),"\n",(0,t.jsx)(n.p,{children:"Messages are decoded in two steps:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// 1. Parse Pulsar message JSON\nconst pulsarMsg = JSON.parse(data.toString());\n\n// 2. Decode base64 payload\nconst payload = Buffer.from(pulsarMsg.payload, 'base64').toString('utf-8');\n"})}),"\n",(0,t.jsx)(n.h3,{id:"message-acknowledgement",children:"Message Acknowledgement"}),"\n",(0,t.jsx)(n.p,{children:"Acknowledgements are required to prevent message delivery stoppage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const ackMsg = { messageId };\nws.send(JSON.stringify(ackMsg));\n"})}),"\n",(0,t.jsx)(n.h3,{id:"control-message-filtering",children:"Control Message Filtering"}),"\n",(0,t.jsx)(n.p,{children:"Control messages (like end-of-topic markers) should not be processed:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"if (msg.type || msg.endOfTopic) {\n    return;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"clean-output",children:"Clean Output"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"stdout"}),": Only decoded message payloads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"stderr"}),": Status messages and errors"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This separation ensures piped output remains clean."}),"\n",(0,t.jsx)(n.h3,{id:"graceful-shutdown",children:"Graceful Shutdown"}),"\n",(0,t.jsx)(n.p,{children:"The client handles Ctrl+C gracefully:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"process.on('SIGINT', () => {\n    console.error('Disconnecting...');\n    ws.close();\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsx)(n.p,{children:"The client requires:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "dependencies": {\n    "ws": "^8.16.0"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Install with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,t.jsx)(n.h2,{id:"making-the-script-executable",children:"Making the Script Executable"}),"\n",(0,t.jsx)(n.p,{children:"On Unix-like systems:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"chmod +x pulsar-simple-client.js\n\n# Run without node prefix\n./pulsar-simple-client.js --tenant YOUR_TENANT --x-api-key YOUR_KEY\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or install globally:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -g .\n\n# Run from anywhere\npulsar-simple-client --tenant YOUR_TENANT --x-api-key YOUR_KEY\n"})}),"\n",(0,t.jsx)(n.h2,{id:"using-npm-scripts",children:"Using npm Scripts"}),"\n",(0,t.jsxs)(n.p,{children:["Add to ",(0,t.jsx)(n.code,{children:"package.json"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "start": "node pulsar-simple-client.js"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Then run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm start -- --tenant YOUR_TENANT --x-api-key YOUR_KEY\n"})}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"The client handles common errors:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Connection errors"}),": WebSocket connection failures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"JSON parse errors"}),": Malformed Pulsar messages"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Base64 decode errors"}),": Invalid payload encoding"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SSL/TLS errors"}),": Certificate verification issues"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Acknowledgement failures"}),": Issues sending acks (logged as warnings)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"All errors are logged to stderr without affecting stdout output."}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"module-not-found-ws",children:"Module not found: 'ws'"}),"\n",(0,t.jsx)(n.p,{children:"Install dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ssl-certificate-errors",children:"SSL Certificate Errors"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--insecure"})," flag is enabled by default for testing. For production:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node pulsar-simple-client.js --tenant YOUR_TENANT --x-api-key YOUR_KEY --insecure false\n"})}),"\n",(0,t.jsx)(n.h3,{id:"connection-refused",children:"Connection Refused"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verify hostname and port"}),"\n",(0,t.jsx)(n.li,{children:"Check network connectivity"}),"\n",(0,t.jsx)(n.li,{children:"Ensure firewall allows outbound connections"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"nodejs-version-too-old",children:"Node.js Version Too Old"}),"\n",(0,t.jsx)(n.p,{children:"Check your Node.js version:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node --version\n"})}),"\n",(0,t.jsx)(n.p,{children:"Requires Node.js 14 or higher."}),"\n",(0,t.jsx)(n.h3,{id:"syntax-errors",children:"Syntax Errors"}),"\n",(0,t.jsx)(n.p,{children:"If you see syntax errors, your Node.js version may be too old. Modern JavaScript features require Node.js 14+."}),"\n",(0,t.jsx)(n.h2,{id:"comparison-with-other-clients",children:"Comparison with Other Clients"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"Node.js"}),(0,t.jsx)(n.th,{children:"Python"}),(0,t.jsx)(n.th,{children:"Go"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Language"}),(0,t.jsx)(n.td,{children:"JavaScript"}),(0,t.jsx)(n.td,{children:"Python"}),(0,t.jsx)(n.td,{children:"Go"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Async Model"}),(0,t.jsx)(n.td,{children:"Async/await"}),(0,t.jsx)(n.td,{children:"Async/await"}),(0,t.jsx)(n.td,{children:"Goroutines"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Dependencies"}),(0,t.jsx)(n.td,{children:"ws library"}),(0,t.jsx)(n.td,{children:"websockets library"}),(0,t.jsx)(n.td,{children:"gorilla/websocket"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Build Required"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Package Manager"}),(0,t.jsx)(n.td,{children:"npm"}),(0,t.jsx)(n.td,{children:"pip"}),(0,t.jsx)(n.td,{children:"go mod"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Best For"}),(0,t.jsx)(n.td,{children:"Backend services"}),(0,t.jsx)(n.td,{children:"Data pipelines"}),(0,t.jsx)(n.td,{children:"High performance"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/actions-events/docs/streaming/examples/python",children:"Python Client Example"})," - Python implementation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/actions-events/docs/streaming/examples/golang",children:"Go Client Example"})," - Go implementation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/actions-events/docs/streaming/message-format",children:"Message Format"})," - Understanding message structure"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/actions-events/docs/streaming/troubleshooting",children:"Troubleshooting"})," - Common issues and solutions"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(96540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},47751:(e,n,s)=>{s.d(n,{u:()=>p,v:()=>c});var r=s(96540),t=s(56347),i=s(205),l=s(57485),a=s(89466),o=s(31682);function c(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function d(e){const{values:n,children:s}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return c(e).map(({props:{value:e,label:n,attributes:s,default:r}})=>({value:e,label:n,attributes:s,default:r}))}(s);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function u({queryString:e=!1,groupId:n}){const s=(0,t.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(i),(0,r.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(s.location.search);n.set(i,e),s.replace({...s.location,search:n.toString()})},[i,s])]}function p(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,l=d(e),[o,c]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:l})),[p,x]=u({queryString:s,groupId:t}),[j,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,t]=(0,a.Dv)(n);return[s,(0,r.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),g=(()=>{const e=p??j;return h({value:e,tabValues:l})?e:null})();(0,i.A)(()=>{g&&c(g)},[g]);return{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!h({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);c(e),x(e),m(e)},[x,m,l]),tabValues:l}}}}]);