"use strict";(globalThis.webpackChunk_8x8_developer_docs=globalThis.webpackChunk_8x8_developer_docs||[]).push([[34821],{18972:(n,e,a)=>{a.d(e,{A:()=>s});const s=a.p+"assets/images/loan-application-dc6f4f4a8dede08f97e3e767d1295e1a.webp"},28453:(n,e,a)=>{a.d(e,{R:()=>i,x:()=>l});var s=a(96540);const o={},t=s.createContext(o);function i(n){const e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),s.createElement(t.Provider,{value:e},n.children)}},98040:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>r,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"connect/docs/whatsapp/whatsapp-flows-examples-financial","title":"Financial Services Flow Examples","description":"Loan Application","source":"@site/docs/connect/docs/whatsapp/whatsapp-flows-examples-financial.md","sourceDirName":"connect/docs/whatsapp","slug":"/connect/docs/whatsapp/whatsapp-flows-examples-financial","permalink":"/connect/docs/whatsapp/whatsapp-flows-examples-financial","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Financial Services"},"sidebar":"sidebarConnectDocs","previous":{"title":"Retail & eCommerce","permalink":"/connect/docs/whatsapp/whatsapp-flows-examples-retail"},"next":{"title":"Professional Services","permalink":"/connect/docs/whatsapp/whatsapp-flows-examples-professional-services"}}');var o=a(74848),t=a(28453);const i={sidebar_label:"Financial Services"},l="Financial Services Flow Examples",r={},c=[{value:"Loan Application",id:"loan-application",level:2},{value:"Step 1: Create the Flow",id:"step-1-create-the-flow",level:3},{value:"Step 2: Publish the Flow",id:"step-2-publish-the-flow",level:3},{value:"Step 3: Send the Flow (Interactive Message)",id:"step-3-send-the-flow-interactive-message",level:3},{value:"Step 4: Handle the Submission",id:"step-4-handle-the-submission",level:3},{value:"Related Resources",id:"related-resources",level:2}];function p(n){const e={a:"a",code:"code",details:"details",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",summary:"summary",ul:"ul",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"financial-services-flow-examples",children:"Financial Services Flow Examples"})}),"\n",(0,o.jsx)(e.h2,{id:"loan-application",children:"Loan Application"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{alt:"Loan Application Flow",src:a(18972).A+"",width:"3630",height:"904"})}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Business Value:"})," Streamline loan application process, reduce drop-off rates, and collect comprehensive applicant information including ID verification for KYC compliance."]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Scenario:"})," A customer needs a loan and completes a WhatsApp Flow that guides them through personal information, ID verification, employment details, and loan requirements. The Flow includes conditional logic, image upload for ID verification, and a comprehensive summary screen before submission."]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Tools Used:"})," Interactive Flow (within service window) + Loan processing system integration"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h3,{id:"step-1-create-the-flow",children:"Step 1: Create the Flow"}),"\n",(0,o.jsx)(e.p,{children:"Multi-screen Flow with routing: Welcome \u2192 [Terms, Personal Info] \u2192 ID Verification \u2192 Employment \u2192 Loan Details \u2192 Summary"}),"\n",(0,o.jsx)(e.p,{children:"This Flow demonstrates advanced features including:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Image component with base64 encoding"}),"\n",(0,o.jsx)(e.li,{children:"OptIn component for terms agreement"}),"\n",(0,o.jsx)(e.li,{children:"EmbeddedLink navigation to Terms screen"}),"\n",(0,o.jsx)(e.li,{children:"PhotoPicker for ID card upload"}),"\n",(0,o.jsx)(e.li,{children:"Conditional fields (If component)"}),"\n",(0,o.jsx)(e.li,{children:"RichText with markdown formatting"}),"\n",(0,o.jsx)(e.li,{children:"Complex routing model with multiple paths"}),"\n"]}),"\n",(0,o.jsxs)(e.details,{children:["\n",(0,o.jsx)(e.summary,{children:"Click to view **Flow JSON Definition**"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Endpoint:"})," ",(0,o.jsx)(e.code,{children:"POST https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "name": "BankSmart Loan Application",\n  "categories": ["OTHER"],\n  "flowJson": "{\\"version\\":\\"7.2\\",\\"routing_model\\":{\\"WELCOME_SCREEN\\":[\\"TOC_SCREEN\\",\\"PERSONAL_INFO_SCREEN\\"],\\"PERSONAL_INFO_SCREEN\\":[\\"ID_VERIFICATION_SCREEN\\"],\\"ID_VERIFICATION_SCREEN\\":[\\"EMPLOYMENT_INFO_SCREEN\\"],\\"EMPLOYMENT_INFO_SCREEN\\":[\\"LOAN_DETAILS_SCREEN\\"],\\"LOAN_DETAILS_SCREEN\\":[\\"SUMMARY_SCREEN\\"]},\\"screens\\":[{\\"id\\":\\"WELCOME_SCREEN\\",\\"title\\":\\"BankSmart Loan\\",\\"layout\\":{\\"type\\":\\"SingleColumnLayout\\",\\"children\\":[{\\"type\\":\\"Image\\",\\"src\\":\\"/9j/4AAQSkZJRgABAQAASABIAAD/4QBYRXhpZgAATU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACgKADAAQAAAABAAABXQAAAAD/wAARCAFdAoADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBQMDAwUGBQUFBQYIBgYGBgYICggICAgICAoKCgoKCgoKDAwMDAwMDg4ODg4PDw8PDw8PDw8P/9sAQwECAgIEBAQHBAQHEAsJCxAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ/90ABAAo/9oADAMBAAIRAxEAPwD9PY727HyiZiPRjuH61bS9fnzURx34x/n8qzAMfWpF3c14+YcJ5bir/WMPF/JX+85cPmWIp/BNo0i1lMclCh9sH/CozaWkuQrgH34qEelWIlB9q+BzPwTySvrTg4PyZ72G4wxkN5XKc2jnHyYYeoOayJNOIbGK7GONSSevvUOoIYbWSZeCo4zzXwGZfR7ktcHiPlJf5H0GG48W1aH3HJjTnYEqhYL1wM4/Kq7WgBOe1fTukWNrFplhJDEqF0UsQOpI7+tXrnQtKvuLq0jkPqVGfzGK2q/R9/dLkxHv9dNCocce9rDQ+V1th6Ukqmedo+ZrD4nXPxTvvtFroejiRR87Q22w4zjcfMbGPTmv2rL/AIfoZtR1goS9H/kfn+acFU8PDnhJt9kz1v7ZI3yvIMgZyf8A9dMN+rHarucn3r5z0fx34k0hFj0zU5UAzw24H8j0r0TTPiNfxsrXu1yOp2jP4gYr8PzfwBp0ajjh6/4H1WC4+i2ueFj//Uk75/xO9sb1bhfle68wP1ZT09T9K4zXPFVzZTNbkR3TFcsq8BlJ9PQU7Tp/FniZRcajI1okzDZbIhJYDqTgZ/KvTvDfwZ0eG08zU4o4mJ5TbgjGc5+tfj3jFxngcFl8sLhppyktbbHq5DkeKxeIjWqQaS6n5+fHj4i3/wARfELKFAl1R1e1t2YZZCdgKjPRQq9cH1NeAE815x+0fJBH8VNUiiAiMcscYA4UxBNuFznHHPtXP6j4v1+7IHn+UoOfLQZx+JBr/WvwqyF5TwtThON5PVv1Z+HcS42GNxMpQdlshmQOea+hfDc1vH4XsNT8Q3cNjp8dsklxfyyLHHFCUG98sSfpX5yT2dzPJ5tzO8z9cuxLY+g4FUppGgjimhcxyRuskbqSCrKcqwI6gg8ivf8AEPDkuH8XXo0HzqDs77pNJ6ep0ZLjFh8ZTnPV7n7d6n8RdW1fQm0mWyFrE0m9byL7y8DbkdFJPp1616N8MrPw9d6vbyacS1z9qlguXI5MTgHZGw6jy8K3HOGr+cO98Qa1qxY3d/c3G/ndLK7Y9eScCuZ+wXY4FrP+TL/WvzT6WvBn9hcRRx1JPkrx3tpzLb1uj67hHPpV8N7KT1jt8j//0/04bB7VG4boBzQ3Wjmu5s88cT709BgVFuqaNs1d2b02S9TUyn+GkVsnipB9KrcvkLFpcKoK8muisvlSsaI9q3bI/vV+lTYGbM8Y44rYt+x9awlbDgitG3kVq1GbEuL+dXrdbm2s5tQk1Jx5EBkeQq5+UNGDJgdN5jRvcrXxh/wUe8Xt4Z/Zv+wWwcXPiS5is1KDOYwxln/8dj2/jX0hr+u2fhfQr7xJqODa6bC88o3YJVVJxXgP/BPX4J6x428Ty/HD4lhW1DXIfs+kxpyY7NFJ+Zh/FKS7M3Xl1zzXvP8A2J38zLqFR93ov1Oanz08VKHy/Q/Kr9mP4OWup2a/EPx0m61tXkmji2ncvmlQqhgTgEBnJGAQpGcgYN58QPjv4x8ba/qWieGr11gju5LS3t7VghRIZNpGFAA3FQPyrD/aN/ah\n}\n\n'})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Response:"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "id": "loan_app_flow_123",\n  "success": true\n}\n\n'})}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h3,{id:"step-2-publish-the-flow",children:"Step 2: Publish the Flow"}),"\n",(0,o.jsxs)(e.details,{children:["\n",(0,o.jsx)(e.summary,{children:"Click to view **Publish Flow Request**"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Endpoint:"})," ",(0,o.jsx)(e.code,{children:"POST https://chatapps.8x8.com/config/v1/channels/whatsapp/{channelId}/flows/loan_app_flow_123/publish"})]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Response:"})," ",(0,o.jsx)(e.code,{children:"200 OK"})," (no response body)"]}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h3,{id:"step-3-send-the-flow-interactive-message",children:"Step 3: Send the Flow (Interactive Message)"}),"\n",(0,o.jsxs)(e.details,{children:["\n",(0,o.jsx)(e.summary,{children:"Click to view **Send Interactive Flow Message**"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Endpoint:"})," ",(0,o.jsx)(e.code,{children:"POST https://chatapps.8x8.com/api/v1/subaccounts/{subAccountId}/messages"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "user": {\n    "msisdn": "+15551234567"\n  },\n  "type": "Interactive",\n  "content": {\n    "interactive": {\n      "type": "flow",\n      "header": {\n        "type": "text",\n        "text": "Apply for a Loan"\n      },\n      "body": {\n        "text": "Get approved in minutes. Complete your loan application with BankSmart - fast, secure, and simple."\n      },\n      "footer": {\n        "text": "Secure application process"\n      },\n      "action": {\n        "parameters": {\n          "flowId": "loan_app_flow_123",\n          "flowCta": "Apply Now"\n        }\n      }\n    }\n  }\n}\n\n'})}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h3,{id:"step-4-handle-the-submission",children:"Step 4: Handle the Submission"}),"\n",(0,o.jsxs)(e.details,{children:["\n",(0,o.jsx)(e.summary,{children:"Click to view **Webhook Payload and Processing Logic**"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Webhook Payload (Flow Submission):"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "namespace": "ChatApps",\n  "eventType": "inbound_message_received",\n  "payload": {\n    "umid": "abc-123-def-456",\n    "subAccountId": "your-subaccount-id",\n    "user": {\n      "msisdn": "+15551234567"\n    },\n    "type": "Interactive",\n    "content": {\n      "interactive": {\n        "type": "nfmReply",\n        "nfmReply": {\n          "responseJson": "{\\"full_name\\":\\"Jane Doe\\",\\"email\\":\\"jane@example.com\\",\\"phone\\":\\"12345678\\",\\"dob\\":\\"1990-01-01\\",\\"id_photo\\":\\"base64_encoded_image_data\\",\\"employment_status\\":\\"Employed\\",\\"employer_name\\":\\"TechCorp\\",\\"monthly_income\\":\\"6000\\",\\"loan_amount\\":\\"20000\\",\\"loan_term\\":\\"5\\"}"\n        }\n      }\n    }\n  }\n}\n\n'})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Processing Logic:"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"app.post('/webhook', async (req, res) => {\n  const payload = req.body.payload;\n\n  // Identify Flow submission\n  if (payload.type === 'Interactive' &&\n      payload.content.interactive.type === 'nfmReply') {\n\n    // Parse submission\n    const data = JSON.parse(payload.content.interactive.nfmReply.responseJson);\n\n    // Extract ID photo (base64 encoded)\n    const idPhoto = data.id_photo;\n\n    // Upload ID photo to secure storage\n    const idPhotoUrl = await uploadToSecureStorage(idPhoto, {\n      userId: payload.user.msisdn,\n      type: 'kyc_document',\n      timestamp: new Date()\n    });\n\n    // Calculate loan eligibility\n    const monthlyIncome = parseFloat(data.monthly_income);\n    const loanAmount = parseFloat(data.loan_amount);\n    const loanTerm = parseInt(data.loan_term);\n\n    // Simple DTI ratio check (30% max)\n    const monthlyPayment = loanAmount / (loanTerm * 12);\n    const dtiRatio = monthlyPayment / monthlyIncome;\n    const preliminaryApproval = dtiRatio <= 0.3;\n\n    // Create loan application in system\n    const applicationId = await createLoanApplication({\n      applicantName: data.full_name,\n      email: data.email,\n      phone: data.phone,\n      dateOfBirth: data.dob,\n      idPhotoUrl: idPhotoUrl,\n      employmentStatus: data.employment_status,\n      employerName: data.employer_name,\n      monthlyIncome: monthlyIncome,\n      loanAmount: loanAmount,\n      loanTerm: loanTerm,\n      dtiRatio: dtiRatio,\n      preliminaryStatus: preliminaryApproval ? 'approved' : 'pending_review',\n      source: 'whatsapp_flow',\n      createdAt: new Date()\n    });\n\n    // Trigger KYC verification workflow\n    await triggerKYCVerification(applicationId, idPhotoUrl);\n\n    // Send confirmation message\n    let responseMessage = '';\n    if (preliminaryApproval) {\n      responseMessage = `Great news, ${data.full_name}! Your loan application #${applicationId} has been preliminarily approved. \\\\n\\\\nLoan Amount: Rp ${loanAmount}\\\\nTerm: ${loanTerm} years\\\\n\\\\nWe're verifying your documents and will contact you within 24 hours to finalize your loan.`;\n    } else {\n      responseMessage = `Thank you, ${data.full_name}! Your loan application #${applicationId} has been received and is under review. \\\\n\\\\nLoan Amount: Rp ${loanAmount}\\\\nTerm: ${loanTerm} years\\\\n\\\\nOur team will contact you within 24-48 hours to discuss your options.`;\n    }\n\n    await sendMessage({\n      user: { msisdn: payload.user.msisdn },\n      type: 'text',\n      content: {\n        text: responseMessage\n      }\n    });\n\n    // Send notification to loan team\n    await notifyLoanTeam({\n      applicationId: applicationId,\n      applicantName: data.full_name,\n      loanAmount: loanAmount,\n      status: preliminaryApproval ? 'pre_approved' : 'pending_review'\n    });\n  }\n\n  res.status(200).send('OK');\n});\n\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Best Practices:"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Security:"})," Store ID photos and sensitive data in encrypted storage with proper access controls"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"KYC Compliance:"})," Implement automated ID verification (OCR, face matching) to streamline processing"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Risk Assessment:"})," Use credit scoring APIs and DTI ratio calculations for preliminary approval"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Transparency:"})," Clearly communicate loan terms, interest rates, and repayment schedules"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Follow-up:"})," Set up automated reminders for document completion and application status updates"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Fraud Detection:"})," Cross-reference applicant information with credit bureaus and fraud databases"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Customer Experience:"})," Provide real-time application status updates via WhatsApp"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Data Retention:"})," Comply with financial regulations for document storage and retention periods"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"related-resources",children:"Related Resources"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.a,{href:"/connect/docs/whatsapp/whatsapp-flows-ui-guide",children:"WhatsApp Flows in 8x8 Connect"})})," - Complete guide for creating Flows using 8x8 Connect portal"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.a,{href:"/connect/docs/whatsapp/whatsapp-flows-api",children:"WhatsApp Flows API Reference"})})," - API documentation for programmatic Flow management"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:(0,o.jsx)(e.a,{href:"/connect/docs/whatsapp/whatsapp-flows-examples",children:"All Flow Examples"})})," - Browse examples from other industries"]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}}}]);