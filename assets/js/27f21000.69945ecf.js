"use strict";(globalThis.webpackChunk_8x8_developer_docs=globalThis.webpackChunk_8x8_developer_docs||[]).push([[61205],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(96540);const c={},l=i.createContext(c);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),i.createElement(l.Provider,{value:n},e.children)}},49509:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/vca-webhook-flow-d7502f13b21e1123a6af45333ff5646a.png"},78867:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"connect/docs/voice/webhook-guides/voice-call-action-webhook-guide","title":"Voice Call Action Webhook Guide","description":"Voice Call Action Webhook Guide","source":"@site/docs/connect/docs/voice/webhook-guides/voice-call-action-webhook-guide.md","sourceDirName":"connect/docs/voice/webhook-guides","slug":"/connect/docs/voice/webhook-guides/voice-call-action-webhook-guide","permalink":"/connect/docs/voice/webhook-guides/voice-call-action-webhook-guide","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"/connect/docs/voice/webhook-guides/voice-call-action-webhook-guide","title":"Voice Call Action Webhook Guide"},"sidebar":"sidebarConnectDocs","previous":{"title":"Webhooks Overview","permalink":"/connect/docs/voice/webhook-guides/webhooks-overview"},"next":{"title":"VSS webhook (overview)","permalink":"/connect/docs/voice/webhook-guides/voice-session-summary-webhook"}}');var c=t(74848),l=t(28453);const s={slug:"/connect/docs/voice/webhook-guides/voice-call-action-webhook-guide",title:"Voice Call Action Webhook Guide"},o=void 0,r={},d=[{value:"Voice Call Action Webhook Guide",id:"voice-call-action-webhook-guide",level:2},{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"VCA Webhook Flow Diagram",id:"vca-webhook-flow-diagram",level:3},{value:"Call Action Request (IVR)",id:"call-action-request-ivr",level:2},{value:"Support Channels",id:"support-channels",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"voice-call-action-webhook-guide",children:"Voice Call Action Webhook Guide"}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.strong,{children:"Voice Call Action (VCA) webhook"})," is a callback mechanism that allows your application to receive real-time events during an active voice session and respond with dynamic callflow instructions."]}),"\n",(0,c.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsx)(n.p,{children:"VCA webhooks are used across multiple 8x8 Voice products:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Product"}),(0,c.jsx)(n.th,{children:"Use Case"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"IVR"})}),(0,c.jsx)(n.td,{children:"Receive DTMF input from callers and respond with next menu or action"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"Number Masking"})}),(0,c.jsx)(n.td,{children:"Handle call events and control call routing between masked parties"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"Voice Messaging"})}),(0,c.jsx)(n.td,{children:"Track call progression and handle custom logic"})]})]})]}),"\n",(0,c.jsxs)(n.p,{children:["Your VCA endpoint can be configured at the sub-account level using the ",(0,c.jsx)(n.a,{href:"/connect/reference/create-a-new-webhook",children:"Webhooks API"}),"."]}),"\n",(0,c.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Call event occurs"})," \u2013 A caller presses a digit (DTMF), a call connects, or another action completes"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"8x8 sends webhook"})," \u2013 The platform POSTs a JSON payload to your configured VCA endpoint"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Your server responds"})," \u2013 Return a callflow JSON to instruct 8x8 what to do next (play audio, bridge call, hang up, etc.)"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"vca-webhook-flow-diagram",children:"VCA Webhook Flow Diagram"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"VCA Webhook Flow",src:t(49509).A+"",title:"Voice Call Action Webhook Flow",width:"3936",height:"1088"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["\ud83d\udcd8 ",(0,c.jsx)(n.strong,{children:"Product-Specific Guides"})]}),"\n",(0,c.jsx)(n.p,{children:"For detailed implementation guides specific to each product:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"/connect/docs/voice/ivr/call-action-handling",children:"IVR Call Action Handling"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"/connect/docs/voice/number-masking/call-action-handling",children:"Number Masking Call Action Handling"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"call-action-request-ivr",children:"Call Action Request (IVR)"}),"\n",(0,c.jsx)(n.p,{children:"8x8 platform will POST a JSON object to your URL."}),"\n",(0,c.jsx)(n.p,{children:"Sample of Call Action Event"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "namespace": "VOICE",\n  "eventType": "CALL_ACTION",\n  "description": "Action request of a call",\n  "payload": {\n    "eventId": "77e6a667-133a-11ef-9dd4-e911cc6fc82f",\n    "callId": "627e25f1-133a-11ef-b08c-e33c09483244",\n    "sessionId": "a4fad4b3-b388-12ee-b217-2fb8260fcf59",\n    "subAccountId": "account_x",\n    "callStatus": "ACTION_COMPLETED",\n    "callDirection": "OUTBOUND",\n    "callType": "PSTN",\n    "source": "+6568888888",\n    "destination": "+6598888888",\n    "sourceFormat": "MSISDN",\n    "destinationFormat": "MSISDN",\n    "sourceCountryCode": "SG",\n    "destinationCountryCode": "SG",\n    "sourceRefId": "SOME-VN-REF-ID",\n    "destinationRefId": "ANOTHER-VN-REF-ID",\n    "callDuration": 0,\n    "eventData": {            \n      "dtmf": "1", //Nullable    \n    },\n    "sipCode": 200,\n    "timestamp": "2024-05-16T04:12:11.217Z"\n    "clientActionId": "ivr1_level1"\n  }\n}\n\n'})}),"\n",(0,c.jsx)(n.p,{children:"The JSON object will contain the following values:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Name"}),(0,c.jsx)(n.th,{children:"Type"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"namespace"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:'8x8\'s overall product namespace. For Voice products the value will be "VOICE"'})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"eventType"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:'Event type that generated this callback. For call action events the value will be "CALL_ACTION"'})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"description"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Description of the event type that triggered the callback."})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"eventId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Unique id that triggered the callback"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"callId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Id unique to a one call leg of the number masking session [UUID]"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"sessionId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Unique id that represents Number masking session [UUID]"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"subAccountId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Id of the 8x8 SubAccount that the callback belongs to."})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"callStatus"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsxs)(n.td,{children:["Status of the call leg that triggered the callback. Values can be:",(0,c.jsx)(n.br,{}),'"ACTION_COMPLETED"',(0,c.jsx)(n.br,{}),'"CALL_RECEIVED" (applicable to Inbound IVR and Number Masking)']})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"callDirection"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:'Direction of the call leg that triggered the callback. Values can be "INBOUND" or "OUTBOUND"'})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"callType"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:'Type of the call leg. Values can be "PSTN" (telco operators) or "VOIP"(app to app calling users) users), depending on where the call was initiated from.'})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"source"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Source number associated with the call leg that triggered this callback"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"sourceFormat"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:'Format of the source number. For NumberMasking the value will always be "MSISDN"'})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"destinationFormat"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:'Format of the destination number. For NumberMasking the value will always be "MSISDN"'})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"sourceCountryCode"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Country code of the source number"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"destinationCountryCode"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Country code of the destination number"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"sourceRefId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"For OUTBOUND call legs, this property shows the referenceId of the Virtual Number that has been called. For INBOUND calls the value is null"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"destinationRefId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"For INBOUND call legs, this property shows the referenceId of the Virtual Number that is used as callerId. For OUTBOUND calls the value is null"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"callDuration"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Duration of the call leg (in seconds) that initiated the callback"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"dtmf"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"DTMF captured if SayAndCapture action is requested. Will be null if nothing is captured."})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"sipCode"}),(0,c.jsx)(n.td,{children:"Integer"}),(0,c.jsx)(n.td,{children:"Final Sip status code for the call leg(s) defined by RFC 3261"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"timestamp"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"Timestamp of a call event"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"clientActionId"}),(0,c.jsx)(n.td,{children:"String"}),(0,c.jsx)(n.td,{children:"clientActionId that was provided in the previous VCA callback."})]})]})]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["\ud83d\udea7 ",(0,c.jsx)(n.strong,{children:"ClientActionId"})]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"clientActionId"})," is only supported in Voice Call Action Webhook"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"clientActionId in Voice Call Action Response"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n    "clientActionId": "ivr1_level2", // Optional. Only supported in Call Action Webhook.\n    "callflow": [\n        {\n            "action": "makeCall", \n            "params": {\n                "source": "+65123456789",\n                "destination": "+6543212345",\n                "callRecording": true\n            }\n        }\n    ]\n}\n\n'})}),"\n",(0,c.jsx)(n.h2,{id:"support-channels",children:"Support Channels"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Technical support:"})," ",(0,c.jsx)(n.a,{href:"mailto:support@cpaas.8x8.com",children:"support@cpaas.8x8.com"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Sales inquiries:"})," Contact your account manager or visit ",(0,c.jsx)(n.a,{href:"https://cpaas.8x8.com/en/contact-us/",children:"cpaas.8x8.com/en/contact-us"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Support Portal:"})," ",(0,c.jsx)(n.a,{href:"https://support.cpaas.8x8.com/hc/en-us",children:"https://support.cpaas.8x8.com/hc/en-us"})]}),"\n"]}),"\n",(0,c.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);