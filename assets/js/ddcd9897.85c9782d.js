"use strict";(self.webpackChunk_8x8_developer_docs=self.webpackChunk_8x8_developer_docs||[]).push([[20345],{28453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>c});var s=n(96540);const r={},i=s.createContext(r);function d(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:t},e.children)}},69089:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"connect/docs/delivery-receipts-for-outbound-sms","title":"Delivery receipts for outbound SMS","description":"Delivery Receipts (DR) are webhooks for delivery statuses: POST requests sent by 8x8 platform in JSON format to the delivery reports callback URL configured for your account.","source":"@site/docs/connect/docs/delivery-receipts-for-outbound-sms.md","sourceDirName":"connect/docs","slug":"/connect/docs/delivery-receipts-for-outbound-sms","permalink":"/connect/docs/delivery-receipts-for-outbound-sms","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebarConnectReference","previous":{"title":"Inbound SMS","permalink":"/connect/docs/inbound-sms"},"next":{"title":"SMS Engage response webhook","permalink":"/connect/docs/sms-engage-response-webhook"}}');var r=n(74848),i=n(28453);const d={},c="Delivery receipts for outbound SMS",l={},o=[{value:"Retry logic",id:"retry-logic",level:3},{value:"Delivery Receipt - Validity Period",id:"delivery-receipt---validity-period",level:3},{value:"Webhook format",id:"webhook-format",level:3},{value:"Sample delivery receipt for outbound SMS",id:"sample-delivery-receipt-for-outbound-sms",level:3}];function a(e){const t={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"delivery-receipts-for-outbound-sms",children:"Delivery receipts for outbound SMS"})}),"\n",(0,r.jsxs)(t.p,{children:["Delivery Receipts (DR) are webhooks for delivery statuses: ",(0,r.jsx)(t.code,{children:"POST"})," requests sent by 8x8 platform in ",(0,r.jsx)(t.code,{children:"JSON"})," format to the delivery reports callback URL configured for your account."]}),"\n",(0,r.jsxs)(t.p,{children:["Whenever a message has a new delivery status associated with the delivery stage it is in, 8x8 sends out a ",(0,r.jsx)(t.code,{children:"POST"})," request with the new status to the callback URL."]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"\ud83d\udcd8"}),"\n",(0,r.jsxs)(t.p,{children:["You can configure your callback using ",(0,r.jsx)(t.a,{href:"/connect/reference/get-webhooks-2",children:"Webhooks Configuration API"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["You can also overwrite the default callback URL on a per-message / per-batch-of-message basis by specifying a different ",(0,r.jsx)(t.code,{children:"dlrCallbackUrl"})," value in your API requests when sending a message or a batch of messages (see ",(0,r.jsx)(t.a,{href:"/connect/reference/send-api-1",children:"Send API"}),")"]}),"\n",(0,r.jsx)(t.h3,{id:"retry-logic",children:"Retry logic"}),"\n",(0,r.jsx)(t.p,{children:"In case of connection error/timeout or HTTP response code 4XX or 5XX, there will be multiple retry attempts with progressive intervals: 1, 10, 30, 90 sec."}),"\n",(0,r.jsx)(t.h3,{id:"delivery-receipt---validity-period",children:"Delivery Receipt - Validity Period"}),"\n",(0,r.jsx)(t.p,{children:"If we do not receive a delivery receipt from the SMS carrier promptly, our platform will continue checking for up to 48 hours for a delivery receipt. If the delivery receipt is received after this 48-hour period, there will be no delivery receipt webhook sent."}),"\n",(0,r.jsx)(t.h3,{id:"webhook-format",children:"Webhook format"}),"\n",(0,r.jsx)(t.p,{children:"Request body description"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter name"}),(0,r.jsx)(t.th,{children:"Parameter type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"namespace"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsxs)(t.td,{children:["A generic namespace for incoming webhook.",(0,r.jsx)(t.br,{}),"Equal to ",(0,r.jsx)(t.code,{children:"SMS"})," for delivery receipts."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"eventType"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsxs)(t.td,{children:["Webhook type. ",(0,r.jsx)(t.br,{}),"Equals to ",(0,r.jsx)(t.code,{children:"outbound_message_status_changed"})," for delivery receipts."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"description"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Human-readable description of the incoming event"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"payload"}),(0,r.jsx)(t.td,{children:"object"}),(0,r.jsx)(t.td,{children:"Delivery receipt information, see below."})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Payload object description"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter name"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter type"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"umid"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"uuid"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A unique identifier generated by 8x8 for the message"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"batchId"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"uuid"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["A unique identifier generated by 8x8 for the message if sent using ",(0,r.jsx)(t.a,{href:"/connect/reference/send-sms-batch",children:"Batch API"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"clientMessageId"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Your custom identifier for the message"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"clientBatchId"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Client managed id for this batch of messages : your own unique reference"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"subAccountId"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The sub-account id used to deliver the message"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"source"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The source (i.e: sender) used to deliver the message"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"destination"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Destination phone number where the SMS was sent (E.164 format)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"status"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Current status of the message, please see ",(0,r.jsx)(t.a,{href:"/connect/reference/message-status-references",children:"Message status reference"})," for details."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"price"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Price information of the message, this field is optional in the response if there is no charge incurred. Please see ",(0,r.jsx)(t.a,{href:"/connect/reference/price-object-reference",children:"Price object reference"})," for details"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"smsCount"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"integer"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Number of SMS segment in the message"})]})]})]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"\ud83d\udea7"}),"\n",(0,r.jsx)(t.p,{children:"Please note that the Price object is optional and might not be included in the Delivery Receipts callback. When a message was not sent successfully, you will still receive Delivery Receipts with Failed/Undelivered status without incurring any charges. Hence, the price information is not available for the Delivery Receipts."}),"\n"]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"\u2757\ufe0f"}),"\n",(0,r.jsx)(t.p,{children:"If the request you receive has a different structure from described in this document, please contact our support to activate the latest format for your account."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"sample-delivery-receipt-for-outbound-sms",children:"Sample delivery receipt for outbound SMS"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "namespace": "SMS",\n  "eventType": "outbound_message_status_changed",\n  "description": "SMS outbound message delivery receipt",\n  "payload": {\n    "umid": "9e09ac86-bd74-5465-851d-1eb5a5fdbb9a",\n    "batchId": "3e09ac86-bd74-5465-851d-1eb5a5fdbb9b",\n    "clientMessageId": "1e09ac86-bd74-5465-851d-1eb5a5fdbb9b",\n    "clientBatchId": "2e09ac86-bd74-5465-851d-1eb5a5fdbb9b",\n    "subAccountId": "SubAccount-1",\n    "source": "8x8",\n    "destination": "+12025550293",\n    "status": {\n      "state": "undelivered",\n      "detail": "rejected_by_operator",\n      "timestamp": "2016-01-01T00:00:00Z",\n      "errorCode": 15,\n      "errorMessage": "Invalid destination"\n    },\n    "price": {\n      "total": 0.0375,\n      "perSms": 0.0125,\n      "currency": "USD"\n    },\n    "smsCount": 3\n  }\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8" ?>\n<root>\n  <namespace>SMS</namespace>\n  <eventType>outbound_message_status_changed</eventType>\n  <description>SMS outbound message delivery receipt</description>\n  <payload>\n    <umid>9e09ac86-bd74-5465-851d-1eb5a5fdbb9a</umid>\n    <batchId>3e09ac86-bd74-5465-851d-1eb5a5fdbb9b</batchId>\n    <clientMessageId>1e09ac86-bd74-5465-851d-1eb5a5fdbb9b</clientMessageId>\n    <clientBatchId>2e09ac86-bd74-5465-851d-1eb5a5fdbb9b</clientBatchId>\n    <subAccountId>SubAccount-1</subAccountId>\n    <source>8x8</source>\n    <destination>+12025550293</destination>\n    <status>\n      <state>undelivered</state>\n      <detail>rejected_by_operator</detail>\n      <timestamp>2016-01-01T00:00:00Z</timestamp>\n      <errorCode>15</errorCode>\n      <errorMessage>Invalid destination</errorMessage>\n    </status>\n    <price>\n      <total>0.0375</total>\n      <perSms>0.0125</perSms>\n      <currency>USD</currency>\n    </price>\n    <smsCount>3</smsCount>\n  </payload>\n</root>\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);